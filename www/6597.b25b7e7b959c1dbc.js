"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6597],{6597:(F,u,n)=>{n.r(u),n.d(u,{AccountPageModule:()=>w});var f=n(6019),a=n(9133),m=n(4522),i=n(6990),d=n(6431),g=n(6952),p=n(1855),o=n(3245),A=n(6898),h=n(5729),Z=n(6733),T=n(1516),P=n(1750);function b(e,s){if(1&e&&(o.TgZ(0,"div"),o._uU(1),o.ALo(2,"translate"),o.ALo(3,"date"),o.ALo(4,"translate"),o.ALo(5,"translate"),o.ALo(6,"translate"),o.qZA()),2&e){const r=o.oxw();o.xp6(1),o.AsE(" ",o.lcZ(2,2,"ACCOUNT.UPDATE_ACCOUNT_INFORMATION.emailVerifiedAt")," ",o.gM2(3,4,r.user.email_verified_at,o.lcZ(4,9,"GENERAL.exactTimeDisplayFormat"),o.lcZ(5,11,"GENERAL.timezone"),o.lcZ(6,13,"GENERAL.locale"))," ")}}function C(e,s){1&e&&(o.TgZ(0,"div"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"ACCOUNT.UPDATE_ACCOUNT_INFORMATION.emailNotVerified")," "))}function U(e,s){if(1&e&&(o.TgZ(0,"ion-button",17),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e){const r=o.oxw();o.Q6J("disabled",r.user.name==r.updateProfileForm.value.name&&r.user.email==r.updateProfileForm.value.email||r.updateProfileForm.invalid||r.isProcessed),o.xp6(1),o.Oqu(o.lcZ(2,2,"ACCOUNT.UPDATE_ACCOUNT_INFORMATION.INPUT.updateButton"))}}function N(e,s){if(1&e&&(o.TgZ(0,"ion-button",17),o._UZ(1,"ion-spinner",18),o.qZA()),2&e){const r=o.oxw();o.Q6J("disabled",r.updateProfileForm.invalid||r.isProcessed)}}function E(e,s){if(1&e&&(o.TgZ(0,"ion-button",17),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e){const r=o.oxw();o.Q6J("disabled",r.changePasswordForm.invalid||r.isProcessed),o.xp6(1),o.Oqu(o.lcZ(2,2,"ACCOUNT.CHANGE_PASSWORD.INPUT.changeButton"))}}function y(e,s){if(1&e&&(o.TgZ(0,"ion-button",17),o._UZ(1,"ion-spinner",18),o.qZA()),2&e){const r=o.oxw();o.Q6J("disabled",r.changePasswordForm.invalid||r.isProcessed)}}const _=[{path:"",component:(()=>{class e{constructor(r,t,c,l,L){this.formBuilder=r,this.auth=t,this.alertController=c,this.translate=l,this.errorService=L,this.isProcessed=!1,this.user={id:0,name:"Not yet loaded",email:"Not yet loaded",email_verified_at:null,project_id:0,created_at:null,updated_at:null}}ngOnInit(){this.updateProfileForm=this.formBuilder.group({name:["",a.kI.required],email:["",a.kI.required],fax:[""]}),this.changePasswordForm=this.formBuilder.group({password:["",a.kI.required],password_confirmation:["",a.kI.required],current_password:["",a.kI.required],fax:[""]})}ionViewWillEnter(){this.isProcessed=!1,this.getUser()}get updateProfileErrorControl(){return this.updateProfileForm.controls}get changePasswordErrorControl(){return this.changePasswordForm.controls}getUser(){this.auth.user().subscribe({error:r=>{this.errorService.errorOccurred.emit(r)},next:r=>{const t=r;this.user=JSON.parse(JSON.stringify(t.user)),this.updateProfileForm.patchValue(t.user)}})}updateProfile(){if(!(this.isProcessed||this.updateProfileForm.value.fax||this.user.name==this.updateProfileForm.value.name&&this.user.email==this.updateProfileForm.value.email)){if(this.isProcessed=!0,!this.updateProfileForm.valid)return!1;this.auth.updateProfile(this.updateProfileForm.value).subscribe({error:r=>{if("The given data was invalid."==r.error.message)for(const t in r.error.errors){let c=[];for(const l in r.error.errors[t])c.push({[r.error.errors[t][l]]:!0});this.updateProfileForm.controls[t].setErrors(c)}else this.errorService.errorOccurred.emit(r);this.isProcessed=!1},next:()=>{},complete:()=>{this.updateProfileForm.reset(),this.getUser(),this.isProcessed=!1,this.auth.authChanged.emit("account updated")}})}}changePassword(){if(!this.isProcessed&&!this.changePasswordForm.value.fax){if(this.isProcessed=!0,!this.changePasswordForm.valid)return!1;this.auth.changePassword(this.changePasswordForm.value).subscribe({error:r=>{if("The given data was invalid."==r.error.message)for(const t in r.error.errors){let c=[];for(const l in r.error.errors[t])c.push({[r.error.errors[t][l]]:!0});this.changePasswordForm.controls[t].setErrors(c)}else this.errorService.errorOccurred.emit(r);this.isProcessed=!1},next:()=>{},complete:()=>{this.changePasswordForm.reset(),this.isProcessed=!1}})}}deleteAccount(){return(0,p.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("ACCOUNT.DELETE_ACCOUNT.INPUT.alertHeader"),message:this.translate.instant("ACCOUNT.DELETE_ACCOUNT.INPUT.alertText"),buttons:[{cssClass:"cancel-text",text:this.translate.instant("GENERAL.POPUPS.cancel"),role:"cancel"},{text:this.translate.instant("ACCOUNT.DELETE_ACCOUNT.INPUT.deleteButton"),handler:()=>{console.log("Confirm Okay"),console.log("Delete account ... (not yet implemented)")}}]})).present()})}}return e.\u0275fac=function(r){return new(r||e)(o.Y36(a.qu),o.Y36(A.e),o.Y36(i.Br),o.Y36(d.sK),o.Y36(h.T))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-account"]],decls:95,vars:79,consts:[[3,"backButton","title"],["color","light"],[1,"inside-card-grid"],["novalidate","",3,"formGroup","ngSubmit"],["color","danger"],["formControlName","name","type","text",3,"placeholder"],[3,"errors"],["formControlName","email","type","email",3,"placeholder"],[4,"ngIf"],["formControlName","fax",1,"invisible"],[1,"ion-padding"],["type","submit","class","ion-no-margin","expand","block","color","primary",3,"disabled",4,"ngIf"],["formControlName","password","type","password",3,"placeholder"],["formControlName","password_confirmation","type","password",3,"placeholder"],["formControlName","current_password","type","password",3,"placeholder"],["color","danger",3,"backButton","title"],["color","danger","disabled","true","expand","block",1,"ion-no-margin",3,"click"],["type","submit","expand","block","color","primary",1,"ion-no-margin",3,"disabled"],["name","crescent"]],template:function(r,t){1&r&&(o.TgZ(0,"ion-content"),o._UZ(1,"app-toolbar"),o.TgZ(2,"ion-grid"),o.TgZ(3,"ion-row"),o.TgZ(4,"ion-col"),o._UZ(5,"app-card-title-bar",0),o.ALo(6,"translate"),o.TgZ(7,"ion-card",1),o.TgZ(8,"ion-card-content"),o.TgZ(9,"ion-grid",2),o.TgZ(10,"ion-row"),o.TgZ(11,"ion-col"),o.TgZ(12,"form",3),o.NdJ("ngSubmit",function(){return t.updateProfile()}),o.TgZ(13,"ion-label",4),o._uU(14),o.ALo(15,"translate"),o._UZ(16,"br"),o.qZA(),o._UZ(17,"br"),o.TgZ(18,"ion-item",1),o._UZ(19,"ion-input",5),o.ALo(20,"translate"),o.qZA(),o._UZ(21,"app-form-error",6),o.TgZ(22,"ion-item",1),o._UZ(23,"ion-input",7),o.ALo(24,"translate"),o.qZA(),o._UZ(25,"app-form-error",6),o._UZ(26,"br"),o._UZ(27,"br"),o.TgZ(28,"ion-label"),o._uU(29),o.ALo(30,"translate"),o.ALo(31,"date"),o.ALo(32,"translate"),o.ALo(33,"translate"),o.ALo(34,"translate"),o._UZ(35,"br"),o._uU(36),o.ALo(37,"translate"),o.ALo(38,"date"),o.ALo(39,"translate"),o.ALo(40,"translate"),o.ALo(41,"translate"),o._UZ(42,"br"),o.YNc(43,b,7,15,"div",8),o.YNc(44,C,3,3,"div",8),o.qZA(),o._UZ(45,"ion-checkbox",9),o.TgZ(46,"div",10),o.YNc(47,U,3,4,"ion-button",11),o.YNc(48,N,2,1,"ion-button",11),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(49,"br"),o._UZ(50,"br"),o._UZ(51,"br"),o._UZ(52,"app-card-title-bar",0),o.ALo(53,"translate"),o.TgZ(54,"ion-card",1),o.TgZ(55,"ion-card-content"),o.TgZ(56,"ion-grid",2),o.TgZ(57,"ion-row"),o.TgZ(58,"ion-col"),o.TgZ(59,"form",3),o.NdJ("ngSubmit",function(){return t.changePassword()}),o.TgZ(60,"ion-item",1),o._UZ(61,"ion-input",12),o.ALo(62,"translate"),o.qZA(),o._UZ(63,"app-form-error",6),o.TgZ(64,"ion-item",1),o._UZ(65,"ion-input",13),o.ALo(66,"translate"),o.qZA(),o._UZ(67,"app-form-error",6),o.TgZ(68,"ion-item",1),o._UZ(69,"ion-input",14),o.ALo(70,"translate"),o.qZA(),o._UZ(71,"app-form-error",6),o._UZ(72,"ion-checkbox",9),o.TgZ(73,"div",10),o.YNc(74,E,3,4,"ion-button",11),o.YNc(75,y,2,1,"ion-button",11),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(76,"br"),o._UZ(77,"br"),o._UZ(78,"br"),o._UZ(79,"app-card-title-bar",15),o.ALo(80,"translate"),o.TgZ(81,"ion-card",1),o.TgZ(82,"ion-card-content"),o.TgZ(83,"ion-grid",2),o.TgZ(84,"ion-row"),o.TgZ(85,"ion-col"),o.TgZ(86,"ion-label",4),o._uU(87),o.ALo(88,"translate"),o._UZ(89,"br"),o.qZA(),o._UZ(90,"br"),o.TgZ(91,"div",10),o.TgZ(92,"ion-button",16),o.NdJ("click",function(){return t.deleteAccount()}),o._uU(93),o.ALo(94,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&r&&(o.xp6(5),o.s9C("title",o.lcZ(6,31,"ACCOUNT.UPDATE_ACCOUNT_INFORMATION.title")),o.Q6J("backButton",!1),o.xp6(7),o.Q6J("formGroup",t.updateProfileForm),o.xp6(2),o.Oqu(o.lcZ(15,33,"ACCOUNT.UPDATE_ACCOUNT_INFORMATION.warning")),o.xp6(5),o.s9C("placeholder",o.lcZ(20,35,"REGISTER.INPUT.name")),o.xp6(2),o.Q6J("errors",t.updateProfileErrorControl.name.errors),o.xp6(2),o.s9C("placeholder",o.lcZ(24,37,"REGISTER.INPUT.email")),o.xp6(2),o.Q6J("errors",t.updateProfileErrorControl.email.errors),o.xp6(4),o.AsE(" ",o.lcZ(30,39,"GENERAL.createdAt")," ",o.gM2(31,41,t.user.created_at,o.lcZ(32,46,"GENERAL.exactTimeDisplayFormat"),o.lcZ(33,48,"GENERAL.timezone"),o.lcZ(34,50,"GENERAL.locale")),""),o.xp6(7),o.AsE(" ",o.lcZ(37,52,"GENERAL.updatedAt")," ",o.gM2(38,54,t.user.updated_at,o.lcZ(39,59,"GENERAL.exactTimeDisplayFormat"),o.lcZ(40,61,"GENERAL.timezone"),o.lcZ(41,63,"GENERAL.locale")),""),o.xp6(7),o.Q6J("ngIf",t.user.email_verified_at),o.xp6(1),o.Q6J("ngIf",!t.user.email_verified_at),o.xp6(3),o.Q6J("ngIf",!t.isProcessed),o.xp6(1),o.Q6J("ngIf",t.isProcessed),o.xp6(4),o.s9C("title",o.lcZ(53,65,"ACCOUNT.CHANGE_PASSWORD.title")),o.Q6J("backButton",!1),o.xp6(7),o.Q6J("formGroup",t.changePasswordForm),o.xp6(2),o.s9C("placeholder",o.lcZ(62,67,"ACCOUNT.CHANGE_PASSWORD.INPUT.password")),o.xp6(2),o.Q6J("errors",t.changePasswordErrorControl.password.errors),o.xp6(2),o.s9C("placeholder",o.lcZ(66,69,"ACCOUNT.CHANGE_PASSWORD.INPUT.passwordConfirmation")),o.xp6(2),o.Q6J("errors",t.changePasswordErrorControl.password_confirmation.errors),o.xp6(2),o.s9C("placeholder",o.lcZ(70,71,"ACCOUNT.CHANGE_PASSWORD.INPUT.currentPassword")),o.xp6(2),o.Q6J("errors",t.changePasswordErrorControl.current_password.errors),o.xp6(3),o.Q6J("ngIf",!t.isProcessed),o.xp6(1),o.Q6J("ngIf",t.isProcessed),o.xp6(4),o.s9C("title",o.lcZ(80,73,"ACCOUNT.DELETE_ACCOUNT.title")),o.Q6J("backButton",!1),o.xp6(8),o.Oqu(o.lcZ(88,75,"ACCOUNT.DELETE_ACCOUNT.warning")),o.xp6(6),o.Oqu(o.lcZ(94,77,"ACCOUNT.DELETE_ACCOUNT.INPUT.deleteButton")))},directives:[i.W2,Z.n,i.jY,i.Nd,i.wI,T.$,i.PM,i.FN,a._Y,a.JL,a.sg,i.Q$,i.Ie,i.pK,i.j9,a.JJ,a.u,P.A,f.O5,i.nz,i.w,i.YG,i.PQ],pipes:[d.X$,f.uU],styles:['@font-face{font-family:"Montserrat",sans-serif}[_ngcontent-%COMP%]:root{--ion-font-family: "Montserrat", sans-serif}[_ngcontent-%COMP%]:root{--ion-color-primary: #6411D9;--ion-color-primary-rgb: 100,17,217;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #580fbf;--ion-color-primary-tint: #7429dd;--ion-color-secondary: #622BD9;--ion-color-secondary-rgb: 98,43,217;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #5626bf;--ion-color-secondary-tint: #7240dd;--ion-color-tertiary: #752BDF;--ion-color-tertiary-rgb: 117,43,223;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #6726c4;--ion-color-tertiary-tint: #8340e2;--ion-color-success: #1adc6c;--ion-color-success-rgb: 26,220,108;--ion-color-success-contrast: #fff;--ion-color-success-contrast-rgb: 255,255,255;--ion-color-success-shade: #17c25f;--ion-color-success-tint: #31e07b;--ion-color-warning: #f2e231;--ion-color-warning-rgb: 242,226,49;--ion-color-warning-contrast: #fff;--ion-color-warning-contrast-rgb: 255,255,255;--ion-color-warning-shade: #d5c72b;--ion-color-warning-tint: #f3e546;--ion-color-danger: #fc194d;--ion-color-danger-rgb: 252,25,77;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #de1644;--ion-color-danger-tint: #fc305f;--ion-color-medium: #fcfaff;--ion-color-medium-rgb: 252,250,255;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0,0,0;--ion-color-medium-shade: #dedce0;--ion-color-medium-tint: #fcfbff;--ion-color-light: #FFFFFF;--ion-color-light-rgb: 255,255,255;--ion-color-light-contrast: #1a1a1a;--ion-color-light-contrast-rgb: 0,0,0;--ion-color-light-shade: #e0e0e0;--ion-color-light-tint: #ffffff;--ion-text-color: #1c1c1c;--ion-item-background: var(--ion-color-light)}body.dark[_ngcontent-%COMP%]{--ion-color-primary: #7924f0;--ion-color-primary-rgb: 121,36,240;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #6a20d3;--ion-color-primary-tint: #863af2;--ion-color-secondary: #622BD9;--ion-color-secondary-rgb: 98,43,217;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #5626bf;--ion-color-secondary-tint: #7240dd;--ion-color-tertiary: #752BDF;--ion-color-tertiary-rgb: 117,43,223;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #6726c4;--ion-color-tertiary-tint: #8340e2;--ion-color-success: #1adc6c;--ion-color-success-rgb: 26,220,108;--ion-color-success-contrast: #fff;--ion-color-success-contrast-rgb: 255,255,255;--ion-color-success-shade: #17c25f;--ion-color-success-tint: #31e07b;--ion-color-warning: #f2e231;--ion-color-warning-rgb: 242,226,49;--ion-color-warning-contrast: #fff;--ion-color-warning-contrast-rgb: 255,255,255;--ion-color-warning-shade: #d5c72b;--ion-color-warning-tint: #f3e546;--ion-color-danger: #fc194d;--ion-color-danger-rgb: 252,25,77;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #de1644;--ion-color-danger-tint: #fc305f;--ion-color-medium: #121212;--ion-color-medium-rgb: 18,18,18;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255,255,255;--ion-color-medium-shade: #101010;--ion-color-medium-tint: #2a2a2a;--ion-color-light: #1d1d1d;--ion-color-light-rgb: 29,29,29;--ion-color-light-contrast: #ffffff;--ion-color-light-contrast-rgb: 255,255,255;--ion-color-light-shade: #1a1a1a;--ion-color-light-tint: #343434;--ion-text-color: #fff;--ion-item-background: var(--ion-color-light)}form[_ngcontent-%COMP%]{padding-top:10px}hr[_ngcontent-%COMP%]{background-color:var(--ion-color-step-550, #737373)}']}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[g.Bz.forChild(_)],g.Bz]}),e})();var O=n(6453),x=n(6060);let w=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[f.ez,a.u5,i.Pc,v,a.UX,O.K,d.aw.forChild({loader:{provide:d.Zw,useFactory:x.p,deps:[m.eN]}})]]}),e})()}}]);