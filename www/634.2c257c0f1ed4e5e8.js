"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[634],{634:(E,p,t)=>{t.r(p),t.d(p,{LoginPageModule:()=>J});var u=t(6019),s=t(9133),m=t(4522),n=t(6990),c=t(6431),g=t(6952),o=t(3245),f=t(6898),h=t(5729),Z=t(2677),x=t(6733),P=t(1516),v=t(1750),L=t(3829);function A(e,a){1&e&&(o.TgZ(0,"ion-label",17),o._uU(1),o.ALo(2,"translate"),o._UZ(3,"br"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"GENERAL.ERRORS.sessionExpired")," "))}function T(e,a){if(1&e&&(o.TgZ(0,"ion-button",18),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e){const r=o.oxw();o.Q6J("disabled",r.loginForm.invalid||r.isProcessed),o.xp6(1),o.Oqu(o.lcZ(2,2,"LOGIN.INPUT.loginButton"))}}function b(e,a){if(1&e&&(o.TgZ(0,"ion-button",18),o._UZ(1,"ion-spinner",19),o.qZA()),2&e){const r=o.oxw();o.Q6J("disabled",r.loginForm.invalid||r.isProcessed)}}const O=function(){return["/forgot-password"]},y=function(){return["/register"]},I=[{path:"",component:(()=>{class e{constructor(r,i,l,d,M,U){this.formBuilder=r,this.auth=i,this.router=l,this.errorService=d,this.translate=M,this.alertService=U,this.isProcessed=!1,this.sessionExpired=!1}ngOnInit(){this.loginForm=this.formBuilder.group({email:["",s.kI.required],password:["",s.kI.required],fax:[]})}get errorControl(){return this.loginForm.controls}ionViewWillEnter(){this.isProcessed=!1,this.auth.authenticated().subscribe({error:r=>{this.errorService.errorOccurred.emit(r)},next:r=>{1==r.authenticated&&(this.auth.setLoggedIn=!0,this.router.navigate(["/dashboard"]))}}),this.sessionExpired=this.auth.getSessionExpired}keyPressEventHandler(r){"Enter"==r&&!this.isProcessed&&this.login()}login(){if(!this.isProcessed&&!this.loginForm.value.fax&&this.loginForm.valid){if(this.isProcessed=!0,!this.loginForm.valid)return!1;this.auth.login(this.loginForm.value).subscribe({error:r=>{if("The given data was invalid."==r.error.message)for(const i in r.error.errors){const l=[];for(const d in r.error.errors[i])l.push({[r.error.errors[i][d]]:!0});this.loginForm.controls[i].setErrors(l)}else"missingPermissions"==r.error.message?this.alertService.alert("danger",this.translate.instant("GENERAL.ERRORS.missingPermissions"),"","lock-closed"):this.errorService.errorOccurred.emit(r);this.isProcessed=!1,this.loginForm.patchValue({password:""})},next:()=>{},complete:()=>{this.loginForm.reset(),this.auth.setLoggedIn=!0,this.auth.setSessionExpired=!1,this.router.navigate(["/dashboard"]),this.isProcessed=!1,this.auth.authChanged.emit("login")}})}}}return e.\u0275fac=function(r){return new(r||e)(o.Y36(s.qu),o.Y36(f.e),o.Y36(g.F0),o.Y36(h.T),o.Y36(c.sK),o.Y36(Z.c))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:38,vars:29,consts:[[1,"login-grid"],[3,"backButton","title"],["color","light"],[1,"inside-card-grid"],[3,"formGroup","ngSubmit"],["color","danger","class","ion-padding",4,"ngIf"],["type","email","formControlName","email",3,"placeholder"],[3,"errors"],["type","password","formControlName","password",3,"placeholder","keypress"],["id","forgot-password"],[1,"animated-link",3,"routerLink"],["formControlName","fax",1,"invisible"],[1,"ion-padding"],["type","submit","class","ion-no-margin","expand","block","color","primary",3,"disabled",4,"ngIf"],["id","or"],["fill","outline","color","primary","expand","block",1,"ion-no-margin",3,"routerLink"],[1,"fixed-footer"],["color","danger",1,"ion-padding"],["type","submit","expand","block","color","primary",1,"ion-no-margin",3,"disabled"],["name","crescent"]],template:function(r,i){1&r&&(o.TgZ(0,"ion-content"),o._UZ(1,"app-toolbar"),o.TgZ(2,"ion-grid",0),o.TgZ(3,"ion-row"),o.TgZ(4,"ion-col"),o._UZ(5,"app-card-title-bar",1),o.ALo(6,"translate"),o.TgZ(7,"ion-card",2),o.TgZ(8,"ion-card-content"),o.TgZ(9,"ion-grid",3),o.TgZ(10,"ion-row"),o.TgZ(11,"ion-col"),o.TgZ(12,"form",4),o.NdJ("ngSubmit",function(){return i.login()}),o.YNc(13,A,4,3,"ion-label",5),o.TgZ(14,"ion-item",2),o._UZ(15,"ion-input",6),o.ALo(16,"translate"),o.qZA(),o._UZ(17,"app-form-error",7),o.TgZ(18,"ion-item",2),o.TgZ(19,"ion-input",8),o.NdJ("keypress",function(d){return i.keyPressEventHandler(d.key)}),o.ALo(20,"translate"),o.qZA(),o.qZA(),o._UZ(21,"app-form-error",7),o.TgZ(22,"div",9),o.TgZ(23,"a",10),o._uU(24),o.ALo(25,"translate"),o.qZA(),o.qZA(),o._UZ(26,"ion-checkbox",11),o.TgZ(27,"div",12),o.YNc(28,T,3,4,"ion-button",13),o.YNc(29,b,2,1,"ion-button",13),o.qZA(),o.qZA(),o.TgZ(30,"ion-label",14),o._uU(31),o.ALo(32,"translate"),o.qZA(),o.TgZ(33,"div",12),o.TgZ(34,"ion-button",15),o._uU(35),o.ALo(36,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(37,"app-footer",16),o.qZA()),2&r&&(o.xp6(5),o.s9C("title",o.lcZ(6,15,"LOGIN.title")),o.Q6J("backButton",!1),o.xp6(7),o.Q6J("formGroup",i.loginForm),o.xp6(1),o.Q6J("ngIf",i.sessionExpired),o.xp6(2),o.s9C("placeholder",o.lcZ(16,17,"LOGIN.INPUT.email")),o.xp6(2),o.Q6J("errors",i.errorControl.email.errors),o.xp6(2),o.s9C("placeholder",o.lcZ(20,19,"LOGIN.INPUT.password")),o.xp6(2),o.Q6J("errors",i.errorControl.password.errors),o.xp6(2),o.Q6J("routerLink",o.DdM(27,O)),o.xp6(1),o.Oqu(o.lcZ(25,21,"LOGIN.forgotPassword")),o.xp6(4),o.Q6J("ngIf",!i.isProcessed),o.xp6(1),o.Q6J("ngIf",i.isProcessed),o.xp6(2),o.Oqu(o.lcZ(32,23,"LOGIN.or")),o.xp6(3),o.Q6J("routerLink",o.DdM(28,y)),o.xp6(1),o.Oqu(o.lcZ(36,25,"LOGIN.registerButton")))},directives:[n.W2,x.n,n.jY,n.Nd,n.wI,P.$,n.PM,n.FN,s._Y,s.JL,s.sg,u.O5,n.Ie,n.pK,n.j9,s.JJ,s.u,v.A,g.yS,n.YI,n.nz,n.w,n.Q$,n.YG,g.rH,L.c,n.PQ],pipes:[c.X$],styles:["form[_ngcontent-%COMP%]{padding-top:10px}.login-grid[_ngcontent-%COMP%]{max-width:500px}#forgot-password[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:15px;margin-left:16px;text-align:center}ion-item[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}#or[_ngcontent-%COMP%]{margin-left:calc(50% - 13px)!important;transform:translate(-50%)!important}.ion-padding[_ngcontent-%COMP%]{padding-top:16px}@media (max-width: 400px){#or[_ngcontent-%COMP%]{margin-left:calc(50% - 8px);transform:translate(-50%)}}"]}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[g.Bz.forChild(I)],g.Bz]}),e})();var C=t(6453),F=t(6060);let J=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[u.ez,s.u5,n.Pc,N,C.K,s.UX,c.aw.forChild({loader:{provide:c.Zw,useFactory:F.p,deps:[m.eN]}})]]}),e})()}}]);