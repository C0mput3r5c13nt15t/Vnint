"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6597],{6597:(x,f,n)=>{n.r(f),n.d(f,{AccountPageModule:()=>O});var g=n(6019),s=n(9133),m=n(4522),i=n(6990),d=n(6431),u=n(6952),h=n(1855),o=n(3245),p=n(6898),P=n(5729),A=n(2677),b=n(6733),Z=n(1516),C=n(1750);function T(e,c){if(1&e&&(o.TgZ(0,"ion-button",14),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e){const r=o.oxw();o.Q6J("disabled",r.changePasswordForm.invalid||r.isProcessed),o.xp6(1),o.Oqu(o.lcZ(2,2,"ACCOUNT.CHANGE_PASSWORD.INPUT.changeButton"))}}function y(e,c){if(1&e&&(o.TgZ(0,"ion-button",14),o._UZ(1,"ion-spinner",15),o.qZA()),2&e){const r=o.oxw();o.Q6J("disabled",r.changePasswordForm.invalid||r.isProcessed)}}const v=[{path:"",component:(()=>{class e{constructor(r,t,a,l,E,F){this.formBuilder=r,this.auth=t,this.alertController=a,this.translate=l,this.errorService=E,this.alertService=F,this.isProcessed=!1,this.user={id:0,name:"Not yet loaded",email:"Not yet loaded",email_verified_at:null,project_id:0,created_at:null,updated_at:null}}ngOnInit(){this.updateProfileForm=this.formBuilder.group({name:["",s.kI.required],email:["",s.kI.required],fax:[""]}),this.changePasswordForm=this.formBuilder.group({password:["",s.kI.required],password_confirmation:["",s.kI.required],current_password:["",s.kI.required],fax:[""]})}ionViewWillEnter(){this.isProcessed=!1,this.getUser()}get updateProfileErrorControl(){return this.updateProfileForm.controls}get changePasswordErrorControl(){return this.changePasswordForm.controls}getUser(){this.auth.user().subscribe({error:r=>{this.errorService.errorOccurred.emit(r)},next:r=>{const t=r;this.user=JSON.parse(JSON.stringify(t.user)),this.updateProfileForm.patchValue(t.user)}})}updateProfile(){if(!(this.isProcessed||this.updateProfileForm.value.fax||this.user.name==this.updateProfileForm.value.name&&this.user.email==this.updateProfileForm.value.email)){if(this.isProcessed=!0,!this.updateProfileForm.valid)return!1;this.auth.updateProfile(this.updateProfileForm.value).subscribe({error:r=>{if("The given data was invalid."==r.error.message)for(const t in r.error.errors){let a=[];for(const l in r.error.errors[t])a.push({[r.error.errors[t][l]]:!0});this.updateProfileForm.controls[t].setErrors(a)}else"missingPermissions"==r.error.message?this.alertService.alert("danger",this.translate.instant("GENERAL.ERRORS.missingPermissions"),"","lock-closed"):this.errorService.errorOccurred.emit(r);this.isProcessed=!1},next:()=>{},complete:()=>{this.updateProfileForm.reset(),this.getUser(),this.isProcessed=!1,this.auth.authChanged.emit("account updated")}})}}changePassword(){if(!this.isProcessed&&!this.changePasswordForm.value.fax){if(this.isProcessed=!0,!this.changePasswordForm.valid)return!1;this.auth.changePassword(this.changePasswordForm.value).subscribe({error:r=>{if("The given data was invalid."==r.error.message)for(const t in r.error.errors){let a=[];for(const l in r.error.errors[t])a.push({[r.error.errors[t][l]]:!0});this.changePasswordForm.controls[t].setErrors(a)}else"missingPermissions"==r.error.message?this.alertService.alert("danger",this.translate.instant("GENERAL.ERRORS.missingPermissions"),"","lock-closed"):this.errorService.errorOccurred.emit(r);this.isProcessed=!1},next:r=>{let t=r;this.alertService.alert("success",this.translate.instant("ACCOUNT.CHANGE_PASSWORD.title"),t.message,"checkmark")},complete:()=>{this.changePasswordForm.reset(),this.isProcessed=!1}})}}deleteAccount(){return(0,h.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("ACCOUNT.DELETE_ACCOUNT.INPUT.alertHeader"),message:this.translate.instant("ACCOUNT.DELETE_ACCOUNT.INPUT.alertText"),buttons:[{cssClass:"cancel-text",text:this.translate.instant("GENERAL.POPUPS.cancel"),role:"cancel"},{text:this.translate.instant("ACCOUNT.DELETE_ACCOUNT.INPUT.deleteButton"),handler:()=>{console.log("Confirm Okay"),console.log("Delete account ... (not yet implemented)")}}]})).present()})}}return e.\u0275fac=function(r){return new(r||e)(o.Y36(s.qu),o.Y36(p.e),o.Y36(i.Br),o.Y36(d.sK),o.Y36(P.T),o.Y36(A.c))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-account"]],decls:48,vars:29,consts:[[3,"backButton","title"],["color","light"],[1,"inside-card-grid"],["novalidate","",3,"formGroup","ngSubmit"],["formControlName","password","type","password",3,"placeholder"],[3,"errors"],["formControlName","password_confirmation","type","password",3,"placeholder"],["formControlName","current_password","type","password",3,"placeholder"],["formControlName","fax",1,"invisible"],[1,"ion-padding"],["type","submit","class","ion-no-margin","expand","block","color","primary",3,"disabled",4,"ngIf"],["color","danger",3,"backButton","title"],["color","danger"],["color","danger","disabled","true","expand","block",1,"ion-no-margin",3,"click"],["type","submit","expand","block","color","primary",1,"ion-no-margin",3,"disabled"],["name","crescent"]],template:function(r,t){1&r&&(o.TgZ(0,"ion-content"),o._UZ(1,"app-toolbar"),o.TgZ(2,"ion-grid"),o.TgZ(3,"ion-row"),o.TgZ(4,"ion-col"),o._UZ(5,"app-card-title-bar",0),o.ALo(6,"translate"),o.TgZ(7,"ion-card",1),o.TgZ(8,"ion-card-content"),o.TgZ(9,"ion-grid",2),o.TgZ(10,"ion-row"),o.TgZ(11,"ion-col"),o.TgZ(12,"form",3),o.NdJ("ngSubmit",function(){return t.changePassword()}),o.TgZ(13,"ion-item",1),o._UZ(14,"ion-input",4),o.ALo(15,"translate"),o.qZA(),o._UZ(16,"app-form-error",5),o.TgZ(17,"ion-item",1),o._UZ(18,"ion-input",6),o.ALo(19,"translate"),o.qZA(),o._UZ(20,"app-form-error",5),o.TgZ(21,"ion-item",1),o._UZ(22,"ion-input",7),o.ALo(23,"translate"),o.qZA(),o._UZ(24,"app-form-error",5),o._UZ(25,"ion-checkbox",8),o.TgZ(26,"div",9),o.YNc(27,T,3,4,"ion-button",10),o.YNc(28,y,2,1,"ion-button",10),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(29,"br"),o._UZ(30,"br"),o._UZ(31,"br"),o._UZ(32,"app-card-title-bar",11),o.ALo(33,"translate"),o.TgZ(34,"ion-card",1),o.TgZ(35,"ion-card-content"),o.TgZ(36,"ion-grid",2),o.TgZ(37,"ion-row"),o.TgZ(38,"ion-col"),o.TgZ(39,"ion-label",12),o._uU(40),o.ALo(41,"translate"),o._UZ(42,"br"),o.qZA(),o._UZ(43,"br"),o.TgZ(44,"div",9),o.TgZ(45,"ion-button",13),o.NdJ("click",function(){return t.deleteAccount()}),o._uU(46),o.ALo(47,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&r&&(o.xp6(5),o.s9C("title",o.lcZ(6,15,"ACCOUNT.CHANGE_PASSWORD.title")),o.Q6J("backButton",!1),o.xp6(7),o.Q6J("formGroup",t.changePasswordForm),o.xp6(2),o.s9C("placeholder",o.lcZ(15,17,"ACCOUNT.CHANGE_PASSWORD.INPUT.password")),o.xp6(2),o.Q6J("errors",t.changePasswordErrorControl.password.errors),o.xp6(2),o.s9C("placeholder",o.lcZ(19,19,"ACCOUNT.CHANGE_PASSWORD.INPUT.passwordConfirmation")),o.xp6(2),o.Q6J("errors",t.changePasswordErrorControl.password_confirmation.errors),o.xp6(2),o.s9C("placeholder",o.lcZ(23,21,"ACCOUNT.CHANGE_PASSWORD.INPUT.currentPassword")),o.xp6(2),o.Q6J("errors",t.changePasswordErrorControl.current_password.errors),o.xp6(3),o.Q6J("ngIf",!t.isProcessed),o.xp6(1),o.Q6J("ngIf",t.isProcessed),o.xp6(4),o.s9C("title",o.lcZ(33,23,"ACCOUNT.DELETE_ACCOUNT.title")),o.Q6J("backButton",!1),o.xp6(8),o.Oqu(o.lcZ(41,25,"ACCOUNT.DELETE_ACCOUNT.warning")),o.xp6(6),o.Oqu(o.lcZ(47,27,"ACCOUNT.DELETE_ACCOUNT.INPUT.deleteButton")))},directives:[i.W2,b.n,i.jY,i.Nd,i.wI,Z.$,i.PM,i.FN,s._Y,s.JL,s.sg,i.Ie,i.pK,i.j9,s.JJ,s.u,C.A,i.nz,i.w,g.O5,i.Q$,i.YG,i.PQ],pipes:[d.X$],styles:['@font-face{font-family:"Montserrat",sans-serif}[_ngcontent-%COMP%]:root{--ion-font-family: "Montserrat", sans-serif}[_ngcontent-%COMP%]:root{--ion-color-primary: #6411D9;--ion-color-primary-rgb: 100,17,217;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #580fbf;--ion-color-primary-tint: #7429dd;--ion-color-secondary: #622BD9;--ion-color-secondary-rgb: 98,43,217;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #5626bf;--ion-color-secondary-tint: #7240dd;--ion-color-tertiary: #752BDF;--ion-color-tertiary-rgb: 117,43,223;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #6726c4;--ion-color-tertiary-tint: #8340e2;--ion-color-success: #33cc73;--ion-color-success-rgb: 51,204,115;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #2db465;--ion-color-success-tint: #47d181;--ion-color-warning: #f2e231;--ion-color-warning-rgb: 242,226,49;--ion-color-warning-contrast: #fff;--ion-color-warning-contrast-rgb: 255,255,255;--ion-color-warning-shade: #d5c72b;--ion-color-warning-tint: #f3e546;--ion-color-danger: #e53e3e;--ion-color-danger-rgb: 229,62,62;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #ca3737;--ion-color-danger-tint: #e85151;--ion-color-medium: #fcfaff;--ion-color-medium-rgb: 252,250,255;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0,0,0;--ion-color-medium-shade: #dedce0;--ion-color-medium-tint: #fcfbff;--ion-color-light: #FFFFFF;--ion-color-light-rgb: 255,255,255;--ion-color-light-contrast: #1a1a1a;--ion-color-light-contrast-rgb: 0,0,0;--ion-color-light-shade: #e0e0e0;--ion-color-light-tint: #ffffff;--ion-text-color: #1c1c1c;--ion-item-background: var(--ion-color-light)}body.dark[_ngcontent-%COMP%]{--ion-color-primary: #7924f0;--ion-color-primary-rgb: 121,36,240;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #6a20d3;--ion-color-primary-tint: #863af2;--ion-color-secondary: #622BD9;--ion-color-secondary-rgb: 98,43,217;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #5626bf;--ion-color-secondary-tint: #7240dd;--ion-color-tertiary: #752BDF;--ion-color-tertiary-rgb: 117,43,223;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #6726c4;--ion-color-tertiary-tint: #8340e2;--ion-color-success: #33cc73;--ion-color-success-rgb: 51,204,115;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #2db465;--ion-color-success-tint: #47d181;--ion-color-warning: #f2e231;--ion-color-warning-rgb: 242,226,49;--ion-color-warning-contrast: #fff;--ion-color-warning-contrast-rgb: 255,255,255;--ion-color-warning-shade: #d5c72b;--ion-color-warning-tint: #f3e546;--ion-color-danger: #e53e3e;--ion-color-danger-rgb: 229,62,62;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #ca3737;--ion-color-danger-tint: #e85151;--ion-color-medium: #121212;--ion-color-medium-rgb: 18,18,18;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255,255,255;--ion-color-medium-shade: #101010;--ion-color-medium-tint: #2a2a2a;--ion-color-light: #1d1d1d;--ion-color-light-rgb: 29,29,29;--ion-color-light-contrast: #ffffff;--ion-color-light-contrast-rgb: 255,255,255;--ion-color-light-shade: #1a1a1a;--ion-color-light-tint: #343434;--ion-text-color: #fff;--ion-item-background: var(--ion-color-light)}form[_ngcontent-%COMP%]{padding-top:10px}hr[_ngcontent-%COMP%]{background-color:var(--ion-color-step-550, #737373)}']}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[u.Bz.forChild(v)],u.Bz]}),e})();var U=n(6453),w=n(6060);let O=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[g.ez,s.u5,i.Pc,N,s.UX,U.K,d.aw.forChild({loader:{provide:d.Zw,useFactory:w.p,deps:[m.eN]}})]]}),e})()}}]);