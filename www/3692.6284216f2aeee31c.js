"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3692],{3692:(G,p,s)=>{s.r(p),s.d(p,{AdministratePageModule:()=>w});var m=s(6019),h=s(9133),u=s(4522),t=s(6990),f=s(6431),_=s(6952),A=s(1855),g=s(9814),o=s(3245),R=s(7094),E=s(5729),Z=s(2677),b=s(6733),x=s(1516),T=s(1750);function y(e,a){if(1&e){const r=o.EpF();o.TgZ(0,"ion-chip",12),o.NdJ("click",function(){o.CHM(r);const n=o.oxw().$implicit;return n.show_permissions=!n.show_permissions}),o._UZ(1,"ion-icon",13),o.TgZ(2,"ion-label"),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()}2&e&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"GENERAL.showMore")))}function O(e,a){if(1&e){const r=o.EpF();o.TgZ(0,"ion-chip",12),o.NdJ("click",function(){o.CHM(r);const n=o.oxw().$implicit;return n.show_permissions=!n.show_permissions}),o._UZ(1,"ion-icon",14),o.TgZ(2,"ion-label"),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()}2&e&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"GENERAL.showLess")))}function L(e,a){if(1&e){const r=o.EpF();o.TgZ(0,"ion-item",16),o.TgZ(1,"ion-label"),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.TgZ(4,"ion-checkbox",17),o.NdJ("click",function(){const c=o.CHM(r).$implicit,l=o.oxw(2).$implicit;return o.oxw(2).togglePermission(l.id,c.name)}),o.qZA(),o.qZA()}if(2&e){const r=a.$implicit,i=o.oxw(2).$implicit;o.xp6(2),o.Oqu(o.lcZ(3,2,"GENERAL.PERMISSIONS."+r.name)),o.xp6(2),o.Q6J("checked",i.permissions_names.includes(r.name))}}function M(e,a){if(1&e&&(o.TgZ(0,"ion-list"),o.YNc(1,L,5,4,"ion-item",15),o.qZA()),2&e){const r=o.oxw().$implicit,i=o.oxw(2);o.Q6J("@openClose",r.show_permissions?"open":"closed"),o.xp6(1),o.Q6J("ngForOf",i.permissions)}}function S(e,a){if(1&e){const r=o.EpF();o.TgZ(0,"ion-card"),o.TgZ(1,"ion-card-header"),o.TgZ(2,"ion-card-title"),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.TgZ(5,"ion-card-subtitle"),o._uU(6),o.ALo(7,"translate"),o.TgZ(8,"ion-label",7),o._uU(9),o.ALo(10,"date"),o.ALo(11,"translate"),o.ALo(12,"translate"),o.ALo(13,"translate"),o.qZA(),o._uU(14),o.ALo(15,"translate"),o.TgZ(16,"ion-label",7),o._uU(17),o.ALo(18,"date"),o.ALo(19,"translate"),o.ALo(20,"translate"),o.ALo(21,"translate"),o.qZA(),o.qZA(),o.TgZ(22,"ion-card-subtitle"),o.YNc(23,y,5,3,"ion-chip",8),o.YNc(24,O,5,3,"ion-chip",8),o.TgZ(25,"ion-chip",9),o.NdJ("click",function(){const c=o.CHM(r).$implicit;return o.oxw(2).removeRole(c.id)}),o._UZ(26,"ion-icon",10),o.TgZ(27,"ion-label"),o._uU(28),o.ALo(29,"translate"),o.qZA(),o.qZA(),o._UZ(30,"app-form-error",11),o.YNc(31,M,2,2,"ion-list",3),o.qZA(),o.qZA(),o.qZA()}if(2&e){const r=a.$implicit,i=o.oxw(2);o.xp6(3),o.Oqu(o.lcZ(4,10,"GENERAL.USER_ROLES."+r.name)),o.xp6(3),o.hij(" ",o.lcZ(7,12,"GENERAL.createdAt")," "),o.xp6(3),o.Oqu(o.gM2(10,14,r.created_at,o.lcZ(11,19,"GENERAL.timeDisplayFormat"),o.lcZ(12,21,"GENERAL.timezone"),o.lcZ(13,23,"GENERAL.locale"))),o.xp6(5),o.hij(", ",o.lcZ(15,25,"GENERAL.updatedAt")," "),o.xp6(3),o.Oqu(o.gM2(18,27,r.updated_at,o.lcZ(19,32,"GENERAL.timeDisplayFormat"),o.lcZ(20,34,"GENERAL.timezone"),o.lcZ(21,36,"GENERAL.locale"))),o.xp6(6),o.Q6J("ngIf",!r.show_permissions),o.xp6(1),o.Q6J("ngIf",r.show_permissions),o.xp6(4),o.Oqu(o.lcZ(29,38,"ACTIONS.MANAGE_USER_ROLES.deleteRole")),o.xp6(2),o.Q6J("errors",r.errors),o.xp6(1),o.Q6J("ngIf",i.permissions.length>0)}}function P(e,a){if(1&e&&(o.ynx(0),o.YNc(1,S,32,40,"ion-card",6),o._UZ(2,"br"),o.BQk()),2&e){const r=o.oxw();o.xp6(1),o.Q6J("ngForOf",r.roles)}}const v=[{path:"",component:(()=>{class e{constructor(r,i,n,c,l,d){this.translate=r,this.alertCtrl=i,this.rolesAndPermissionsService=n,this.alertController=c,this.errorService=l,this.alertService=d,this.roles=[],this.permissions=[]}ngOnInit(){}ionViewWillEnter(){this.getPermissions(),this.getRoles()}getRoles(){this.rolesAndPermissionsService.getRoles().subscribe({error:r=>{this.errorService.errorOccurred.emit(r)},next:r=>{const i=r;i.roles.forEach(n=>{n.permissions_names=n.permissions.map(c=>c.name),n.show_permissions=!1}),this.roles=i.roles}})}getPermissions(){this.rolesAndPermissionsService.getPermissions().subscribe({error:r=>{this.errorService.errorOccurred.emit(r)},next:r=>{this.permissions=r.permissions}})}addRole(){this.alertCtrl.create({header:this.translate.instant("ACTIONS.MANAGE_USER_ROLES.ADD_ROLE_ALERT.header"),backdropDismiss:!0,inputs:[{name:"name",placeholder:this.translate.instant("ACTIONS.MANAGE_USER_ROLES.ADD_ROLE_ALERT.name")}],buttons:[{cssClass:"cancel-text",text:this.translate.instant("GENERAL.POPUPS.cancel"),role:"cancel"},{text:this.translate.instant("ACTIONS.MANAGE_USER_ROLES.ADD_ROLE_ALERT.addButton"),handler:i=>{this.rolesAndPermissionsService.createRole({name:i.name}).subscribe({error:n=>{if("The given data was invalid."==n.error.message){let c=[];for(const l in n.error.errors)for(const d in n.error.errors[l])c.push(n.error.errors[l][d]+"\n")}else"missingPermissions"==n.error.message?this.alertService.alert("danger",this.translate.instant("GENERAL.ERRORS.missingPermissions"),"","lock-closed"):this.errorService.errorOccurred.emit(n)},next:n=>{const c=n;c.created_role?(c.created_role.permissions_names=c.created_role.permissions.map(l=>l.name),c.created_role.show_permissions=!0,this.roles.push(c.created_role)):this.getRoles()}})}}]}).then(i=>{i.present()})}togglePermission(r,i){this.rolesAndPermissionsService.togglePermission(r,{name:i}).subscribe({error:n=>{this.errorService.errorOccurred.emit(n)},next:()=>{}})}removeRole(r){return(0,A.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({header:this.translate.instant("ACTIONS.MANAGE_USER_ROLES.REMOVE_ROLE_ALERT.alertHeader"),message:this.translate.instant("ACTIONS.MANAGE_USER_ROLES.REMOVE_ROLE_ALERT.alertText"),buttons:[{cssClass:"cancel-text",text:this.translate.instant("GENERAL.POPUPS.cancel"),role:"cancel"},{text:this.translate.instant("ACTIONS.MANAGE_USER_ROLES.REMOVE_ROLE_ALERT.deleteButton"),handler:()=>{this.rolesAndPermissionsService.deleteRole(r).subscribe({error:n=>{if("The given data was invalid."==n.error.message){const c=this.roles.filter(function(l){return l.id==r})[0];c.errors=[];for(const l in n.error.errors)for(const d in n.error.errors[l])c.errors.push({[n.error.errors[l][d]]:!0})}else"missingPermissions"==n.error.message?this.alertService.alert("danger",this.translate.instant("GENERAL.ERRORS.missingPermissions"),"","lock-closed"):this.errorService.errorOccurred.emit(n)},next:()=>{},complete:()=>{this.roles=this.roles.filter(n=>n.id!=r)}})}}]})).present()})}}return e.\u0275fac=function(r){return new(r||e)(o.Y36(f.sK),o.Y36(t.Br),o.Y36(R.$),o.Y36(t.Br),o.Y36(E.T),o.Y36(Z.c))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-manage-user-roles"]],decls:17,vars:7,consts:[[3,"title"],["color","light"],[1,"inside-card-grid"],[4,"ngIf"],[1,"ion-padding"],["disabled","true","color","primary","expand","block","type","submit",1,"ion-no-margin",3,"click"],[4,"ngFor","ngForOf"],["color","primary",1,"subtitle-labels"],[3,"click",4,"ngIf"],["disabled","true","color","danger",3,"click"],["name","trash"],[3,"errors"],[3,"click"],["name","chevron-down"],["name","chevron-up"],["lines","none",4,"ngFor","ngForOf"],["lines","none"],["slot","start",3,"checked","click"]],template:function(r,i){1&r&&(o.TgZ(0,"ion-content"),o._UZ(1,"app-toolbar"),o.TgZ(2,"ion-grid"),o.TgZ(3,"ion-row"),o.TgZ(4,"ion-col"),o._UZ(5,"app-card-title-bar",0),o.ALo(6,"translate"),o.TgZ(7,"ion-card",1),o.TgZ(8,"ion-card-content"),o.TgZ(9,"ion-grid",2),o.TgZ(10,"ion-row"),o.TgZ(11,"ion-col"),o.YNc(12,P,3,1,"ng-container",3),o.TgZ(13,"div",4),o.TgZ(14,"ion-button",5),o.NdJ("click",function(){return i.addRole()}),o._uU(15),o.ALo(16,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&r&&(o.xp6(5),o.s9C("title",o.lcZ(6,3,"ACTIONS.MANAGE_USER_ROLES.title")),o.xp6(7),o.Q6J("ngIf",i.roles.length>0),o.xp6(3),o.hij("+ ",o.lcZ(16,5,"ACTIONS.MANAGE_USER_ROLES.addRole"),""))},directives:[t.W2,b.n,t.jY,t.Nd,t.wI,x.$,t.PM,t.FN,m.O5,t.YG,m.sg,t.Zi,t.Dq,t.tO,t.Q$,t.hM,t.gu,T.A,t.q_,t.Ie,t.nz,t.w],pipes:[f.X$,m.uU],styles:['@font-face{font-family:"Montserrat",sans-serif}[_ngcontent-%COMP%]:root{--ion-font-family: "Montserrat", sans-serif}[_ngcontent-%COMP%]:root{--ion-color-primary: #6411D9;--ion-color-primary-rgb: 100,17,217;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #580fbf;--ion-color-primary-tint: #7429dd;--ion-color-secondary: #622BD9;--ion-color-secondary-rgb: 98,43,217;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #5626bf;--ion-color-secondary-tint: #7240dd;--ion-color-tertiary: #752BDF;--ion-color-tertiary-rgb: 117,43,223;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #6726c4;--ion-color-tertiary-tint: #8340e2;--ion-color-success: #33cc73;--ion-color-success-rgb: 51,204,115;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #2db465;--ion-color-success-tint: #47d181;--ion-color-warning: #f2e231;--ion-color-warning-rgb: 242,226,49;--ion-color-warning-contrast: #fff;--ion-color-warning-contrast-rgb: 255,255,255;--ion-color-warning-shade: #d5c72b;--ion-color-warning-tint: #f3e546;--ion-color-danger: #e53e3e;--ion-color-danger-rgb: 229,62,62;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #ca3737;--ion-color-danger-tint: #e85151;--ion-color-medium: #fcfaff;--ion-color-medium-rgb: 252,250,255;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0,0,0;--ion-color-medium-shade: #dedce0;--ion-color-medium-tint: #fcfbff;--ion-color-light: #FFFFFF;--ion-color-light-rgb: 255,255,255;--ion-color-light-contrast: #1a1a1a;--ion-color-light-contrast-rgb: 0,0,0;--ion-color-light-shade: #e0e0e0;--ion-color-light-tint: #ffffff;--ion-text-color: #1c1c1c;--ion-item-background: var(--ion-color-light)}body.dark[_ngcontent-%COMP%]{--ion-color-primary: #7924f0;--ion-color-primary-rgb: 121,36,240;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #6a20d3;--ion-color-primary-tint: #863af2;--ion-color-secondary: #622BD9;--ion-color-secondary-rgb: 98,43,217;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #5626bf;--ion-color-secondary-tint: #7240dd;--ion-color-tertiary: #752BDF;--ion-color-tertiary-rgb: 117,43,223;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #6726c4;--ion-color-tertiary-tint: #8340e2;--ion-color-success: #33cc73;--ion-color-success-rgb: 51,204,115;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #2db465;--ion-color-success-tint: #47d181;--ion-color-warning: #f2e231;--ion-color-warning-rgb: 242,226,49;--ion-color-warning-contrast: #fff;--ion-color-warning-contrast-rgb: 255,255,255;--ion-color-warning-shade: #d5c72b;--ion-color-warning-tint: #f3e546;--ion-color-danger: #e53e3e;--ion-color-danger-rgb: 229,62,62;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #ca3737;--ion-color-danger-tint: #e85151;--ion-color-medium: #121212;--ion-color-medium-rgb: 18,18,18;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255,255,255;--ion-color-medium-shade: #101010;--ion-color-medium-tint: #2a2a2a;--ion-color-light: #1d1d1d;--ion-color-light-rgb: 29,29,29;--ion-color-light-contrast: #ffffff;--ion-color-light-contrast-rgb: 255,255,255;--ion-color-light-shade: #1a1a1a;--ion-color-light-tint: #343434;--ion-text-color: #fff;--ion-item-background: var(--ion-color-light)}ion-card[_ngcontent-%COMP%]{color:var(--ion-text-color)!important}.subtitle-labels[_ngcontent-%COMP%]{display:inline}.ion-padding[_ngcontent-%COMP%]{padding-top:16px}'],data:{animation:[(0,g.X$)("openClose",[(0,g.SB)("open",(0,g.oB)({opacity:1})),(0,g.SB)("closed",(0,g.oB)({opacity:0,height:"0px"})),(0,g.eR)("* => closed",[(0,g.jt)("0.3s")]),(0,g.eR)("* => open",[(0,g.jt)("0.3s")])])]}}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[_.Bz.forChild(v)],_.Bz]}),e})();var U=s(6453),C=s(6060);let w=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[m.ez,h.u5,t.Pc,N,U.K,f.aw.forChild({loader:{provide:f.Zw,useFactory:C.p,deps:[u.eN]}})]]}),e})()}}]);