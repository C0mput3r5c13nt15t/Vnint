"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7558],{7558:(w,_,c)=>{c.r(_),c.d(_,{ManageFriendsPageModule:()=>Y});var d=c(6019),s=c(9133),m=c(4522),t=c(6990),g=c(6431),p=c(6952),o=c(3245),h=c(1060),u=c(5729),Z=c(2677),A=c(6733),F=c(1516),N=c(1750),T=c(2932);function b(r,i){1&r&&o._UZ(0,"ion-icon",18)}function x(r,i){1&r&&o._UZ(0,"ion-icon",19)}function E(r,i){1&r&&o._UZ(0,"ion-icon",20)}function M(r,i){if(1&r){const n=o.EpF();o.TgZ(0,"ion-card"),o.TgZ(1,"ion-item",1),o.YNc(2,b,1,0,"ion-icon",12),o.YNc(3,x,1,0,"ion-icon",13),o.YNc(4,E,1,0,"ion-icon",14),o.TgZ(5,"ion-card-header"),o.TgZ(6,"ion-card-title"),o._uU(7),o.qZA(),o.TgZ(8,"ion-card-subtitle"),o._uU(9),o.ALo(10,"translate"),o.TgZ(11,"ion-label",15),o._uU(12),o.ALo(13,"date"),o.ALo(14,"translate"),o.ALo(15,"translate"),o.ALo(16,"translate"),o.qZA(),o._uU(17),o.ALo(18,"translate"),o.TgZ(19,"ion-label",15),o._uU(20),o.qZA(),o.qZA(),o.TgZ(21,"ion-card-subtitle"),o.TgZ(22,"ion-chip",16),o.NdJ("click",function(){const l=o.CHM(n).$implicit;return o.oxw(2).removeFriend(l.id)}),o._UZ(23,"ion-icon",17),o.TgZ(24,"ion-label"),o._uU(25),o.ALo(26,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&r){const n=i.$implicit;o.xp6(2),o.Q6J("ngIf",0==n.state),o.xp6(1),o.Q6J("ngIf",1==n.state),o.xp6(1),o.Q6J("ngIf",2==n.state),o.xp6(3),o.Oqu(n.respondent.email),o.xp6(2),o.hij(" ",o.lcZ(10,9,"ACTIONS.MANAGE_FRIENDS.FRIENDS.proposedOn")," "),o.xp6(3),o.Oqu(o.gM2(13,11,n.created_at,o.lcZ(14,16,"GENERAL.timeDisplayFormat"),o.lcZ(15,18,"GENERAL.timezone"),o.lcZ(16,20,"GENERAL.locale"))),o.xp6(5),o.hij(" ",o.lcZ(18,22,"ACTIONS.MANAGE_FRIENDS.FRIENDS.to")," "),o.xp6(3),o.Oqu(n.respondent.email),o.xp6(5),o.Oqu(o.lcZ(26,24,"ACTIONS.MANAGE_FRIENDS.FRIENDS.removeFriend"))}}function I(r,i){if(1&r&&(o.ynx(0),o.TgZ(1,"ion-label"),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.YNc(4,M,27,26,"ion-card",11),o._UZ(5,"br"),o.BQk()),2&r){const n=o.oxw();o.xp6(2),o.Oqu(o.lcZ(3,2,"ACTIONS.MANAGE_FRIENDS.proposedFriendships")),o.xp6(2),o.Q6J("ngForOf",n.offered_friendships)}}function S(r,i){1&r&&o._UZ(0,"ion-icon",18)}function y(r,i){1&r&&o._UZ(0,"ion-icon",19)}function v(r,i){1&r&&o._UZ(0,"ion-icon",20)}function P(r,i){if(1&r){const n=o.EpF();o.TgZ(0,"ion-chip",22),o.NdJ("click",function(){o.CHM(n);const a=o.oxw().$implicit;return o.oxw(2).acceptFriend(a.id)}),o._UZ(1,"ion-icon",23),o.TgZ(2,"ion-label"),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()}2&r&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"ACTIONS.MANAGE_FRIENDS.FRIENDS.acceptFriend")))}function O(r,i){if(1&r){const n=o.EpF();o.TgZ(0,"ion-card"),o.TgZ(1,"ion-item",1),o.YNc(2,S,1,0,"ion-icon",12),o.YNc(3,y,1,0,"ion-icon",13),o.YNc(4,v,1,0,"ion-icon",14),o.TgZ(5,"ion-card-header"),o.TgZ(6,"ion-card-title"),o._uU(7),o.qZA(),o.TgZ(8,"ion-card-subtitle"),o._uU(9),o.ALo(10,"translate"),o.TgZ(11,"ion-label",15),o._uU(12),o.ALo(13,"date"),o.ALo(14,"translate"),o.ALo(15,"translate"),o.ALo(16,"translate"),o.qZA(),o._uU(17),o.ALo(18,"translate"),o.TgZ(19,"ion-label",15),o._uU(20),o.qZA(),o.qZA(),o.TgZ(21,"ion-card-subtitle"),o.YNc(22,P,5,3,"ion-chip",21),o.TgZ(23,"ion-chip",16),o.NdJ("click",function(){const l=o.CHM(n).$implicit;return o.oxw(2).removeFriend(l.id)}),o._UZ(24,"ion-icon",17),o.TgZ(25,"ion-label"),o._uU(26),o.ALo(27,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&r){const n=i.$implicit;o.xp6(2),o.Q6J("ngIf",0==n.state),o.xp6(1),o.Q6J("ngIf",1==n.state),o.xp6(1),o.Q6J("ngIf",2==n.state),o.xp6(3),o.Oqu(n.applicant.email),o.xp6(2),o.hij(" ",o.lcZ(10,10,"ACTIONS.MANAGE_FRIENDS.FRIENDS.receivedOn")," "),o.xp6(3),o.Oqu(o.gM2(13,12,n.created_at,o.lcZ(14,17,"GENERAL.timeDisplayFormat"),o.lcZ(15,19,"GENERAL.timezone"),o.lcZ(16,21,"GENERAL.locale"))),o.xp6(5),o.hij(" ",o.lcZ(18,23,"ACTIONS.MANAGE_FRIENDS.FRIENDS.from")," "),o.xp6(3),o.Oqu(n.applicant.email),o.xp6(2),o.Q6J("ngIf",0==n.state),o.xp6(4),o.Oqu(o.lcZ(27,25,"ACTIONS.MANAGE_FRIENDS.FRIENDS.removeFriend"))}}function q(r,i){if(1&r&&(o.ynx(0),o.TgZ(1,"ion-label"),o._uU(2),o.ALo(3,"translate"),o.qZA(),o.YNc(4,O,28,27,"ion-card",11),o._UZ(5,"br"),o.BQk()),2&r){const n=o.oxw();o.xp6(2),o.Oqu(o.lcZ(3,2,"ACTIONS.MANAGE_FRIENDS.receivedFriendships")),o.xp6(2),o.Q6J("ngForOf",n.received_friendships)}}function R(r,i){1&r&&(o.ynx(0),o._UZ(1,"app-empty-card",24),o.ALo(2,"translate"),o._UZ(3,"br"),o.BQk()),2&r&&(o.xp6(1),o.s9C("message",o.lcZ(2,1,"ACTIONS.MANAGE_FRIENDS.noFriends")))}function U(r,i){1&r&&(o.TgZ(0,"ion-col"),o.TgZ(1,"ion-card",1),o.TgZ(2,"ion-card-content"),o.TgZ(3,"ion-grid",2),o.TgZ(4,"ion-row"),o.TgZ(5,"ion-col"),o.TgZ(6,"ion-label"),o._uU(7),o.ALo(8,"translate"),o._UZ(9,"br"),o._UZ(10,"ion-icon",18),o._uU(11),o.ALo(12,"translate"),o._UZ(13,"br"),o._UZ(14,"ion-icon",19),o._uU(15),o.ALo(16,"translate"),o._UZ(17,"br"),o._UZ(18,"ion-icon",20),o._uU(19),o.ALo(20,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&r&&(o.xp6(7),o.hij(" ",o.lcZ(8,4,"ACTIONS.MANAGE_FRIENDS.LEGEND.yourFriendshipRequest"),""),o.xp6(4),o.hij(" ",o.lcZ(12,6,"ACTIONS.MANAGE_FRIENDS.LEGEND.hourglass"),""),o.xp6(4),o.hij(" ",o.lcZ(16,8,"ACTIONS.MANAGE_FRIENDS.LEGEND.check"),""),o.xp6(4),o.hij(" ",o.lcZ(20,10,"ACTIONS.MANAGE_FRIENDS.LEGEND.doubleCheck")," "))}function C(r,i){if(1&r&&(o.TgZ(0,"ion-button",25),o._UZ(1,"ion-spinner",26),o.qZA()),2&r){const n=o.oxw();o.Q6J("disabled",n.addFriendForm.invalid||n.isProcessed)}}function L(r,i){if(1&r){const n=o.EpF();o.TgZ(0,"ion-button",27),o.NdJ("click",function(){return o.CHM(n),o.oxw().addFriend()}),o._uU(1),o.ALo(2,"translate"),o.qZA()}if(2&r){const n=o.oxw();o.Q6J("disabled",n.addFriendForm.invalid),o.xp6(1),o.hij("+ ",o.lcZ(2,2,"ACTIONS.MANAGE_FRIENDS.FRIENDS.add"),"")}}const D=[{path:"",component:(()=>{class r{constructor(n,e,a,l,f,Q){this.formBuilder=n,this.alertCtrl=e,this.translate=a,this.friendshipService=l,this.errorService=f,this.alertService=Q,this.isProcessed=!1,this.offered_friendships=[],this.received_friendships=[]}ngOnInit(){this.addFriendForm=this.formBuilder.group({respondent_email:["",s.kI.required],fax:[]})}get errorControl(){return this.addFriendForm.controls}ionViewWillEnter(){this.getFriends()}getFriends(){this.friendshipService.getAssociatedFriendship().subscribe({error:n=>{this.errorService.errorOccurred.emit(n)},next:n=>{const e=n;this.offered_friendships=e.offered_friendships,this.received_friendships=e.received_friendships}})}removeFriend(n){this.friendshipService.deleteFriendship(n).subscribe({error:e=>{"missingPermissions"==e.error.message?this.alertService.alert("danger",this.translate.instant("GENERAL.ERRORS.missingPermissions"),"","lock-closed"):this.errorService.errorOccurred.emit(e)},next:e=>{const a=e;this.alertService.alert("success",this.translate.instant("ACTIONS.MANAGE_FRIENDS.title"),a.message,"checkmark")},complete:()=>{this.getFriends()}})}addFriend(){this.isProcessed=!0,!this.addFriendForm.value.fax&&this.addFriendForm.valid&&this.friendshipService.createFriendship({respondent_email:this.addFriendForm.value.respondent_email}).subscribe({error:n=>{if("The given data was invalid."==n.error.message)for(const e in n.error.errors){const a=[];for(const l in n.error.errors[e])a.push({[n.error.errors[e][l]]:!0});console.log(this.addFriendForm.controls),this.addFriendForm.controls[e].setErrors(a)}else"missingPermissions"==n.error.message?this.alertService.alert("danger",this.translate.instant("GENERAL.ERRORS.missingPermissions"),"","lock-closed"):this.errorService.errorOccurred.emit(n);this.isProcessed=!1},next:n=>{const e=n;this.alertService.alert("success",this.translate.instant("ACTIONS.MANAGE_FRIENDS.title"),e.message,"checkmark")},complete:()=>{this.addFriendForm.reset(),this.isProcessed=!1,this.getFriends()}})}acceptFriend(n){this.friendshipService.acceptFriendship(n).subscribe({error:e=>{"missingPermissions"==e.error.message?this.alertService.alert("danger",this.translate.instant("GENERAL.ERRORS.missingPermissions"),"","lock-closed"):this.errorService.errorOccurred.emit(e)},next:e=>{const a=e;this.alertService.alert("success",this.translate.instant("ACTIONS.MANAGE_FRIENDS.title"),a.message,"checkmark")},complete:()=>{console.log("Friend accepted"),this.getFriends()}})}}return r.\u0275fac=function(n){return new(n||r)(o.Y36(s.qu),o.Y36(t.Br),o.Y36(g.sK),o.Y36(h.u),o.Y36(u.T),o.Y36(Z.c))},r.\u0275cmp=o.Xpm({type:r,selectors:[["app-manage-friends"]],decls:32,vars:14,consts:[[3,"title"],["color","light"],[1,"inside-card-grid"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["type","email","formControlName","respondent_email",3,"placeholder"],[3,"errors"],["formControlName","fax",1,"invisible"],[1,"ion-padding"],["type","submit","class","ion-no-margin","expand","block","color","primary",3,"disabled",4,"ngIf"],["color","primary","expand","block","type","submit","class","ion-no-margin",3,"disabled","click",4,"ngIf"],[4,"ngFor","ngForOf"],["color","danger","slot","start","name","hourglass",4,"ngIf"],["color","warning","slot","start","name","checkmark",4,"ngIf"],["color","success","slot","start","name","checkmark-done",4,"ngIf"],["color","primary",1,"subtitle-labels"],["color","danger",3,"click"],["name","close"],["color","danger","slot","start","name","hourglass"],["color","warning","slot","start","name","checkmark"],["color","success","slot","start","name","checkmark-done"],["color","success",3,"click",4,"ngIf"],["color","success",3,"click"],["name","checkmark"],[3,"message"],["type","submit","expand","block","color","primary",1,"ion-no-margin",3,"disabled"],["name","crescent"],["color","primary","expand","block","type","submit",1,"ion-no-margin",3,"disabled","click"]],template:function(n,e){1&n&&(o.TgZ(0,"ion-content"),o._UZ(1,"app-toolbar"),o.TgZ(2,"ion-grid"),o.TgZ(3,"ion-row"),o.TgZ(4,"ion-col"),o._UZ(5,"app-card-title-bar",0),o.ALo(6,"translate"),o.TgZ(7,"ion-card",1),o.TgZ(8,"ion-card-content"),o.TgZ(9,"ion-grid",2),o.TgZ(10,"ion-row"),o.TgZ(11,"ion-col"),o.YNc(12,I,6,4,"ng-container",3),o.YNc(13,q,6,4,"ng-container",3),o.YNc(14,R,4,3,"ng-container",3),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"ion-row"),o.YNc(16,U,21,12,"ion-col",3),o.TgZ(17,"ion-col"),o.TgZ(18,"ion-card",1),o.TgZ(19,"ion-card-content"),o.TgZ(20,"ion-grid",2),o.TgZ(21,"ion-row"),o.TgZ(22,"ion-col"),o.TgZ(23,"form",4),o.NdJ("ngSubmit",function(){return e.addFriend()}),o.TgZ(24,"ion-item",1),o._UZ(25,"ion-input",5),o.ALo(26,"translate"),o.qZA(),o._UZ(27,"app-form-error",6),o._UZ(28,"ion-checkbox",7),o.TgZ(29,"div",8),o.YNc(30,C,2,1,"ion-button",9),o.YNc(31,L,3,4,"ion-button",10),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&n&&(o.xp6(5),o.s9C("title",o.lcZ(6,10,"ACTIONS.MANAGE_FRIENDS.title")),o.xp6(7),o.Q6J("ngIf",e.offered_friendships.length>0),o.xp6(1),o.Q6J("ngIf",e.received_friendships.length>0),o.xp6(1),o.Q6J("ngIf",0==e.offered_friendships.length&&0==e.received_friendships.length),o.xp6(2),o.Q6J("ngIf",e.offered_friendships.length>0||e.received_friendships.length>0),o.xp6(7),o.Q6J("formGroup",e.addFriendForm),o.xp6(2),o.s9C("placeholder",o.lcZ(26,12,"LOGIN.INPUT.email")),o.xp6(2),o.Q6J("errors",e.errorControl.respondent_email.errors),o.xp6(3),o.Q6J("ngIf",e.isProcessed),o.xp6(1),o.Q6J("ngIf",!e.isProcessed))},directives:[t.W2,A.n,t.jY,t.Nd,t.wI,F.$,t.PM,t.FN,d.O5,s._Y,s.JL,s.sg,t.Ie,t.pK,t.j9,s.JJ,s.u,N.A,t.nz,t.w,t.Q$,d.sg,t.Zi,t.Dq,t.tO,t.hM,t.gu,T.Y,t.YG,t.PQ],pipes:[g.X$,d.uU],styles:['@font-face{font-family:"Montserrat",sans-serif}[_ngcontent-%COMP%]:root{--ion-font-family: "Montserrat", sans-serif}[_ngcontent-%COMP%]:root{--ion-color-primary: #6411D9;--ion-color-primary-rgb: 100,17,217;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #580fbf;--ion-color-primary-tint: #7429dd;--ion-color-secondary: #622BD9;--ion-color-secondary-rgb: 98,43,217;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #5626bf;--ion-color-secondary-tint: #7240dd;--ion-color-tertiary: #752BDF;--ion-color-tertiary-rgb: 117,43,223;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #6726c4;--ion-color-tertiary-tint: #8340e2;--ion-color-success: #33cc73;--ion-color-success-rgb: 51,204,115;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #2db465;--ion-color-success-tint: #47d181;--ion-color-warning: #f2e231;--ion-color-warning-rgb: 242,226,49;--ion-color-warning-contrast: #fff;--ion-color-warning-contrast-rgb: 255,255,255;--ion-color-warning-shade: #d5c72b;--ion-color-warning-tint: #f3e546;--ion-color-danger: #e53e3e;--ion-color-danger-rgb: 229,62,62;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #ca3737;--ion-color-danger-tint: #e85151;--ion-color-medium: #fcfaff;--ion-color-medium-rgb: 252,250,255;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0,0,0;--ion-color-medium-shade: #dedce0;--ion-color-medium-tint: #fcfbff;--ion-color-light: #FFFFFF;--ion-color-light-rgb: 255,255,255;--ion-color-light-contrast: #1a1a1a;--ion-color-light-contrast-rgb: 0,0,0;--ion-color-light-shade: #e0e0e0;--ion-color-light-tint: #ffffff;--ion-text-color: #1c1c1c;--ion-item-background: var(--ion-color-light)}body.dark[_ngcontent-%COMP%]{--ion-color-primary: #7924f0;--ion-color-primary-rgb: 121,36,240;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #6a20d3;--ion-color-primary-tint: #863af2;--ion-color-secondary: #622BD9;--ion-color-secondary-rgb: 98,43,217;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #5626bf;--ion-color-secondary-tint: #7240dd;--ion-color-tertiary: #752BDF;--ion-color-tertiary-rgb: 117,43,223;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #6726c4;--ion-color-tertiary-tint: #8340e2;--ion-color-success: #33cc73;--ion-color-success-rgb: 51,204,115;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #2db465;--ion-color-success-tint: #47d181;--ion-color-warning: #f2e231;--ion-color-warning-rgb: 242,226,49;--ion-color-warning-contrast: #fff;--ion-color-warning-contrast-rgb: 255,255,255;--ion-color-warning-shade: #d5c72b;--ion-color-warning-tint: #f3e546;--ion-color-danger: #e53e3e;--ion-color-danger-rgb: 229,62,62;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #ca3737;--ion-color-danger-tint: #e85151;--ion-color-medium: #121212;--ion-color-medium-rgb: 18,18,18;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255,255,255;--ion-color-medium-shade: #101010;--ion-color-medium-tint: #2a2a2a;--ion-color-light: #1d1d1d;--ion-color-light-rgb: 29,29,29;--ion-color-light-contrast: #ffffff;--ion-color-light-contrast-rgb: 255,255,255;--ion-color-light-shade: #1a1a1a;--ion-color-light-tint: #343434;--ion-text-color: #fff;--ion-item-background: var(--ion-color-light)}ion-card[_ngcontent-%COMP%]{color:var(--ion-text-color)!important}.subtitle-labels[_ngcontent-%COMP%]{display:inline}']}),r})()}];let G=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[[p.Bz.forChild(D)],p.Bz]}),r})();var k=c(6453),J=c(6060);let Y=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[[d.ez,s.u5,t.Pc,G,k.K,g.aw.forChild({loader:{provide:g.Zw,useFactory:J.p,deps:[m.eN]}}),s.UX]]}),r})()}}]);