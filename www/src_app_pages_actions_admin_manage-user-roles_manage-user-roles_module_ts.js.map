{"version":3,"file":"src_app_pages_actions_admin_manage-user-roles_manage-user-roles_module_ts.js","mappings":"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","sources":["./src/app/pages/actions/admin/manage-user-roles/manage-user-roles.page.html","./src/app/pages/actions/admin/manage-user-roles/manage-user-roles-routing.module.ts","./src/app/pages/actions/admin/manage-user-roles/manage-user-roles.module.ts","./src/app/pages/actions/admin/manage-user-roles/manage-user-roles.page.ts"],"sourcesContent":["export default \"<ion-content>\\n  <app-toolbar></app-toolbar>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <app-card-title-bar title=\\\"{{ 'ACTIONS.MANAGE_USER_ROLES.title' | translate }}\\\"></app-card-title-bar>\\n        <ion-card color=\\\"light\\\">\\n          <ion-card-content>\\n            <ion-grid class=\\\"inside-card-grid\\\">\\n              <ion-row>\\n                <ion-col>\\n                  <ng-container *ngIf=\\\"roles.length > 0\\\">\\n                    <ion-card *ngFor=\\\"let role of roles\\\">\\n                      <ion-card-header>\\n                        <ion-card-title>{{ role.name }}</ion-card-title>\\n                        <ion-card-subtitle>\\n                          {{ 'GENERAL.createdAt' | translate }} <ion-label color=\\\"primary\\\" class=\\\"subtitle-labels\\\">{{ role.created_at | date:( 'GENERAL.timeDisplayFormat' | translate ):( 'GENERAL.timezone' | translate ):( 'GENERAL.locale' | translate ) }}</ion-label>,\\n                          {{ 'GENERAL.updatedAt' | translate }} <ion-label color=\\\"primary\\\" class=\\\"subtitle-labels\\\">{{ role.updated_at | date:( 'GENERAL.timeDisplayFormat' | translate ):( 'GENERAL.timezone' | translate ):( 'GENERAL.locale' | translate ) }}</ion-label>\\n                        </ion-card-subtitle>\\n                        <ion-card-subtitle>\\n                          <ion-chip (click)=\\\"role.show_permissions = !role.show_permissions\\\" *ngIf=\\\"!role.show_permissions\\\">\\n                            <ion-icon name=\\\"chevron-down\\\"></ion-icon>\\n                            <ion-label>{{ 'GENERAL.showMore' | translate }}</ion-label>\\n                          </ion-chip>\\n                          <ion-chip (click)=\\\"role.show_permissions = !role.show_permissions\\\" *ngIf=\\\"role.show_permissions\\\">\\n                            <ion-icon name=\\\"chevron-up\\\"></ion-icon>\\n                            <ion-label>{{ 'GENERAL.showLess' | translate }}</ion-label>\\n                          </ion-chip>\\n                          <ion-chip disabled=\\\"true\\\" color=\\\"danger\\\" (click)=\\\"removeRole(role.id)\\\">\\n                            <ion-icon name=\\\"trash\\\"></ion-icon>\\n                            <ion-label>{{ 'ACTIONS.MANAGE_USER_ROLES.deleteRole' | translate }}</ion-label>\\n                          </ion-chip>\\n                          <!-- TODO enable role deletion again (as soon as role creation is updated) -->\\n                          <app-form-error [errors]=\\\"role.errors\\\"></app-form-error>\\n                          <ion-list [@openClose]=\\\"role.show_permissions ? 'open' : 'closed'\\\" *ngIf=\\\"permissions.length > 0\\\">\\n                            <ion-item lines=\\\"none\\\" *ngFor=\\\"let permission of permissions\\\">\\n                              <ion-label>{{ ('GENERAL.PERMISSIONS.' + permission.name) | translate }}</ion-label>\\n                              <ion-checkbox (click)=\\\"togglePermission(role.id, permission.name)\\\" slot=\\\"start\\\" [checked]=\\\"role.permissions_names.includes(permission.name)\\\"></ion-checkbox>\\n                            </ion-item>\\n                          </ion-list>\\n                        </ion-card-subtitle>\\n                      </ion-card-header>\\n                    </ion-card>\\n                    <br>\\n                  </ng-container>\\n                  <div class=\\\"ion-padding\\\">\\n                    <ion-button disabled=\\\"true\\\" color=\\\"primary\\\" (click)=\\\"addRole()\\\" expand=\\\"block\\\" type=\\\"submit\\\" class=\\\"ion-no-margin\\\">+ {{ 'ACTIONS.MANAGE_USER_ROLES.addRole' | translate }}</ion-button>\\n                    <!-- TODO Convert the popup to an html form which can display the returned error messages and has a isProcessed variable (see manage friends) -->\\n                  </div>\\n                </ion-col>\\n              </ion-row>\\n            </ion-grid>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ManageUserRolesPage } from './manage-user-roles.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ManageUserRolesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AdministratePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClient } from '@angular/common/http';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\n\nimport { AdministratePageRoutingModule } from './manage-user-roles-routing.module';\nimport { ComponentsModule } from '../../../../components/components.module';\n\nimport { ManageUserRolesPage } from './manage-user-roles.page';\nimport {createTranslateLoader} from \"src/app/app.module\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AdministratePageRoutingModule,\n    ComponentsModule,\n    TranslateModule.forChild({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: createTranslateLoader,\n        deps: [HttpClient]\n      }\n    })\n  ],\n  declarations: [ManageUserRolesPage]\n})\nexport class AdministratePageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { trigger, state, style, animate, transition } from '@angular/animations';\nimport { RolesAndPermissionsService } from 'src/app/services/roles-and-permissions.service';\nimport { Role } from 'src/app/interfaces/role';\nimport { Permission } from 'src/app/interfaces/permission';\nimport { ErrorService } from 'src/app/services/error.service';\nimport {AlertService} from \"../../../../services/alert.service\";\n\n@Component({\n  selector: 'app-manage-user-roles',\n  templateUrl: './manage-user-roles.page.html',\n  styleUrls: ['./manage-user-roles.page.scss'],\n  animations: [\n    trigger('openClose', [\n      state('open', style({\n        opacity: 1,\n      })),\n      state('closed', style({\n        opacity: 0,\n        height: '0px',\n      })),\n      transition('* => closed', [\n        animate('0.3s')\n      ]),\n      transition('* => open', [\n        animate('0.3s')\n      ]),\n    ]),\n  ],\n})\nexport class ManageUserRolesPage implements OnInit {\n  roles: Role[] = [];\n  permissions: Permission[] = [];\n\n  constructor(private translate: TranslateService,\n              private alertCtrl: AlertController,\n              private rolesAndPermissionsService: RolesAndPermissionsService,\n              private alertController: AlertController,\n              private errorService: ErrorService,\n              private alertService: AlertService) { }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter() {\n    this.getPermissions();\n    this.getRoles();\n  }\n\n  getRoles() {\n    this.rolesAndPermissionsService.getRoles().subscribe({\n      error: error => {\n        this.errorService.errorOccurred.emit(error);\n      },\n      next: response => {\n        const resp: any = response;\n        resp.roles.forEach(role => {\n          role.permissions_names = role.permissions.map(permission => permission.name);\n          role.show_permissions = false;\n        });\n        this.roles = resp.roles;\n      }\n    });\n  }\n\n  getPermissions() {\n    this.rolesAndPermissionsService.getPermissions().subscribe({\n      error: error => {\n        this.errorService.errorOccurred.emit(error);\n      },\n      next: response => {\n        const resp: any = response;\n        this.permissions = resp.permissions;\n      },\n    });\n  }\n\n  addRole() {\n    let alert = this.alertCtrl.create({\n      header: this.translate.instant('ACTIONS.MANAGE_USER_ROLES.ADD_ROLE_ALERT.header'),\n      backdropDismiss: true,\n      inputs: [\n        {\n          name: 'name',\n          placeholder: this.translate.instant('ACTIONS.MANAGE_USER_ROLES.ADD_ROLE_ALERT.name'),\n        }\n      ],\n      buttons: [\n        {\n          cssClass: 'cancel-text',\n          text: this.translate.instant('GENERAL.POPUPS.cancel'),\n          role: 'cancel'\n        },\n        {\n          text: this.translate.instant('ACTIONS.MANAGE_USER_ROLES.ADD_ROLE_ALERT.addButton'),\n          handler: input => {\n            this.rolesAndPermissionsService.createRole({name: input.name}).subscribe({\n              error: error => {\n                if (error.error.message == 'The given data was invalid.') {\n                  let errors: any = [];\n                  for (const errorType in error.error.errors) {\n                    for (const errorMessage in error.error.errors[errorType]) {\n                      errors.push(error.error.errors[errorType][errorMessage] + '\\n');\n                    }\n                  }\n                } else if (error.error.message == 'missingPermissions') {\n                  this.alertService.alert(\"danger\", this.translate.instant('GENERAL.ERRORS.missingPermissions'), '', 'lock-closed');\n                } else {\n                  this.errorService.errorOccurred.emit(error);\n                }\n              },\n              next: response => {\n                // TODO make a success alert\n                const resp: any = response;\n                if (resp.created_role) {\n                  resp.created_role.permissions_names = resp.created_role.permissions.map(permission => permission.name);\n                  resp.created_role.show_permissions = true;\n                  this.roles.push(resp.created_role);\n                } else {\n                  this.getRoles();\n                }\n              },\n            });\n          }\n        }\n      ]\n    });\n    alert.then(addFriendAlert => {\n      addFriendAlert.present();\n    });\n  }\n\n  togglePermission(roleId, permissionName) {\n    this.rolesAndPermissionsService.togglePermission(roleId, {name: permissionName}).subscribe({\n      error: error => {\n        this.errorService.errorOccurred.emit(error);\n      },\n      next: () => {\n        // TODO make a success alert\n      }\n    });\n  }\n\n  async removeRole(roleId) {\n    const alert = await this.alertController.create({\n      header: this.translate.instant('ACTIONS.MANAGE_USER_ROLES.REMOVE_ROLE_ALERT.alertHeader'),\n      message: this.translate.instant('ACTIONS.MANAGE_USER_ROLES.REMOVE_ROLE_ALERT.alertText'),\n      buttons: [\n        {\n          cssClass: 'cancel-text',\n          text: this.translate.instant('GENERAL.POPUPS.cancel'),\n          role: 'cancel',\n        }, {\n          text: this.translate.instant('ACTIONS.MANAGE_USER_ROLES.REMOVE_ROLE_ALERT.deleteButton'),\n          handler: () => {\n            this.rolesAndPermissionsService.deleteRole(roleId).subscribe({\n              error: error => {\n                if (error.error.message == 'The given data was invalid.') {\n                  const role = this.roles.filter(function(role) {return role.id == roleId})[0];\n                  role.errors = [];\n                  for (const errorType in error.error.errors) {\n                    for (const errorMessage in error.error.errors[errorType]) {\n                      role.errors.push({[error.error.errors[errorType][errorMessage]]: true})\n                    }\n                  }\n                } else if (error.error.message == 'missingPermissions') {\n                  this.alertService.alert(\"danger\", this.translate.instant('GENERAL.ERRORS.missingPermissions'), '', 'lock-closed');\n                } else {\n                  this.errorService.errorOccurred.emit(error);\n                }\n              },\n              next: () => {\n                // TODO make a success alert\n              },\n              complete: () => {\n                this.roles = this.roles.filter(role => role.id != roleId);\n              },\n            });\n          }\n        }\n      ]\n    });\n    await alert.present();\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}