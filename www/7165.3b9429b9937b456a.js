"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7165],{7165:(J,p,o)=>{o.r(p),o.d(p,{RegisterPageModule:()=>S});var m=o(6019),n=o(9133),u=o(4522),i=o(6990),d=o(6431),c=o(6952),e=o(3245),h=o(6898),f=o(5729),Z=o(2677),v=o(6733),P=o(1516),T=o(1750),R=o(3829);function A(t,a){if(1&t&&(e.TgZ(0,"ion-button",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const r=e.oxw();e.Q6J("disabled",r.registerForm.invalid||r.isProcessed),e.xp6(1),e.Oqu(e.lcZ(2,2,"REGISTER.INPUT.registerButton"))}}function x(t,a){if(1&t&&(e.TgZ(0,"ion-button",17),e._UZ(1,"ion-spinner",18),e.qZA()),2&t){const r=e.oxw();e.Q6J("disabled",r.registerForm.invalid||r.isProcessed)}}const y=function(){return["/login"]},I=[{path:"",component:(()=>{class t{constructor(r,s,l,g,N,F){this.formBuilder=r,this.auth=s,this.router=l,this.errorService=g,this.translate=N,this.alertService=F,this.isProcessed=!1}ngOnInit(){this.registerForm=this.formBuilder.group({name:["",n.kI.required],email:["",n.kI.required],password:["",n.kI.required],password_confirmation:["",n.kI.required],fax:[]})}ionViewWillEnter(){this.isProcessed=!1,this.auth.authenticated().subscribe({error:r=>{this.errorService.errorOccurred.emit(r)},next:r=>{1==r.authenticated&&(this.auth.setLoggedIn=!0,this.router.navigate(["/dashboard"]))}})}get errorControl(){return this.registerForm.controls}keyPressEventHandler(r){"Enter"==r&&!this.isProcessed&&this.register()}register(){if(!this.isProcessed&&!this.registerForm.value.fax&&this.registerForm.valid){if(this.isProcessed=!0,!this.registerForm.valid)return!1;this.auth.register(this.registerForm.value).subscribe({error:r=>{if("The given data was invalid."==r.error.message)for(const s in r.error.errors){let l=[];for(const g in r.error.errors[s])l.push({[r.error.errors[s][g]]:!0});this.registerForm.controls[s].setErrors(l)}else"missingPermissions"==r.error.message?this.alertService.alert("danger",this.translate.instant("GENERAL.ERRORS.missingPermissions"),"","lock-closed"):this.errorService.errorOccurred.emit(r);this.isProcessed=!1},next:()=>{},complete:()=>{this.registerForm.reset(),this.auth.setLoggedIn=!0,this.router.navigate(["/dashboard"]),this.isProcessed=!1,this.auth.authChanged.emit("register")}})}}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(n.qu),e.Y36(h.e),e.Y36(c.F0),e.Y36(f.T),e.Y36(d.sK),e.Y36(Z.c))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:38,vars:27,consts:[[1,"register-grid"],[3,"title"],["color","light"],[1,"inside-card-grid"],["novalidate","",3,"formGroup","ngSubmit"],["color","light","lines","full"],["formControlName","name","type","text",3,"placeholder"],[3,"errors"],["formControlName","email","type","email",3,"placeholder"],["formControlName","password","type","password",3,"placeholder"],["formControlName","password_confirmation","type","password",3,"placeholder","keypress"],["formControlName","fax",1,"invisible"],[1,"ion-padding"],["type","submit","class","ion-no-margin","expand","block","color","primary",3,"disabled",4,"ngIf"],["id","alreadyHaveAccount"],[1,"animated-link",3,"routerLink"],[1,"fixed-footer"],["type","submit","expand","block","color","primary",1,"ion-no-margin",3,"disabled"],["name","crescent"]],template:function(r,s){1&r&&(e.TgZ(0,"ion-content"),e._UZ(1,"app-toolbar"),e.TgZ(2,"ion-grid",0),e.TgZ(3,"ion-row"),e.TgZ(4,"ion-col"),e._UZ(5,"app-card-title-bar",1),e.ALo(6,"translate"),e.TgZ(7,"ion-card",2),e.TgZ(8,"ion-card-content"),e.TgZ(9,"ion-grid",3),e.TgZ(10,"ion-row"),e.TgZ(11,"ion-col"),e.TgZ(12,"form",4),e.NdJ("ngSubmit",function(){return s.register()}),e.TgZ(13,"ion-item",5),e._UZ(14,"ion-input",6),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"app-form-error",7),e.TgZ(17,"ion-item",5),e._UZ(18,"ion-input",8),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"app-form-error",7),e.TgZ(21,"ion-item",5),e._UZ(22,"ion-input",9),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"app-form-error",7),e.TgZ(25,"ion-item",5),e.TgZ(26,"ion-input",10),e.NdJ("keypress",function(g){return s.keyPressEventHandler(g.key)}),e.ALo(27,"translate"),e.qZA(),e.qZA(),e._UZ(28,"app-form-error",7),e._UZ(29,"ion-checkbox",11),e.TgZ(30,"div",12),e.YNc(31,A,3,4,"ion-button",13),e.YNc(32,x,2,1,"ion-button",13),e.qZA(),e.TgZ(33,"div",14),e.TgZ(34,"a",15),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(37,"app-footer",16),e.qZA()),2&r&&(e.xp6(5),e.s9C("title",e.lcZ(6,14,"REGISTER.title")),e.xp6(7),e.Q6J("formGroup",s.registerForm),e.xp6(2),e.s9C("placeholder",e.lcZ(15,16,"REGISTER.INPUT.name")),e.xp6(2),e.Q6J("errors",s.errorControl.name.errors),e.xp6(2),e.s9C("placeholder",e.lcZ(19,18,"REGISTER.INPUT.email")),e.xp6(2),e.Q6J("errors",s.errorControl.email.errors),e.xp6(2),e.s9C("placeholder",e.lcZ(23,20,"REGISTER.INPUT.password")),e.xp6(2),e.Q6J("errors",s.errorControl.password.errors),e.xp6(2),e.s9C("placeholder",e.lcZ(27,22,"REGISTER.INPUT.passwordConfirmation")),e.xp6(2),e.Q6J("errors",s.errorControl.password_confirmation.errors),e.xp6(3),e.Q6J("ngIf",!s.isProcessed),e.xp6(1),e.Q6J("ngIf",s.isProcessed),e.xp6(2),e.Q6J("routerLink",e.DdM(26,y)),e.xp6(1),e.Oqu(e.lcZ(36,24,"REGISTER.alreadyAccount")))},directives:[i.W2,v.n,i.jY,i.Nd,i.wI,P.$,i.PM,i.FN,n._Y,n.JL,n.sg,i.Ie,i.pK,i.j9,n.JJ,n.u,T.A,i.nz,i.w,m.O5,c.yS,i.YI,R.c,i.YG,i.PQ],pipes:[d.X$],styles:[".register-grid[_ngcontent-%COMP%]{max-width:500px}ion-item[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}#alreadyHaveAccount[_ngcontent-%COMP%]{text-align:center}"]}),t})()}];let C=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.Bz.forChild(I)],c.Bz]}),t})();var E=o(6453),U=o(6060);let S=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.ez,n.u5,i.Pc,C,E.K,n.UX,d.aw.forChild({loader:{provide:d.Zw,useFactory:U.p,deps:[u.eN]}})]]}),t})()}}]);