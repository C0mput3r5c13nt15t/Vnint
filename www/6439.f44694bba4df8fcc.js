"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6439],{3666:(Pe,O,l)=>{l.r(O),l.d(O,{EditProjectPageModule:()=>me});var v=l(6019),d=l(9133),j=l(4522),s=l(6990),A=l(6431),h=l(6952);function C(r,o){if(o.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+o.length+" present")}function M(r){C(1,arguments);var o=Object.prototype.toString.call(r);return r instanceof Date||"object"==typeof r&&"[object Date]"===o?new Date(r.getTime()):"number"==typeof r||"[object Number]"===o?new Date(r):(("string"==typeof r||"[object String]"===o)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function p(r,o){for(var t=r<0?"-":"",n=Math.abs(r).toString();n.length<o;)n="0"+n;return t+n}function x(r,o){C(1,arguments);var t=M(r);if(isNaN(t.getTime()))throw new RangeError("Invalid time value");var n=null!=o&&o.format?String(o.format):"extended",i=null!=o&&o.representation?String(o.representation):"complete";if("extended"!==n&&"basic"!==n)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==i&&"time"!==i&&"complete"!==i)throw new RangeError("representation must be 'date', 'time', or 'complete'");var a="",c="",u="extended"===n?"-":"",m="extended"===n?":":"";if("time"!==i){var f=p(t.getDate(),2),g=p(t.getMonth()+1,2),Z=p(t.getFullYear(),4);a="".concat(Z).concat(u).concat(g).concat(u).concat(f)}if("date"!==i){var I=t.getTimezoneOffset();if(0!==I){var q=Math.abs(I),ue=p(Math.floor(q/60),2),ge=p(q%60,2),pe=I<0?"+":"-";c="".concat(pe).concat(ue,":").concat(ge)}else c="Z";var fe=p(t.getHours(),2),Te=p(t.getMinutes(),2),Ze=p(t.getSeconds(),2),ve=""===a?"":"T",Ae=[fe,Te,Ze].join(m);a="".concat(a).concat(ve).concat(Ae).concat(c)}return a}Math.pow(10,8);var _=36e5;function b(r){if(null===r||!0===r||!1===r)return NaN;var o=Number(r);return isNaN(o)?o:o<0?Math.ceil(o):Math.floor(o)}function S(r,o){C(1,arguments);var t=o||{},n=null==t.additionalDigits?2:b(t.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof r&&"[object String]"!==Object.prototype.toString.call(r))return new Date(NaN);var a,i=w(r);if(i.date){var c=F(i.date,n);a=Y(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var f,u=a.getTime(),m=0;if(i.time&&(m=z(i.time),isNaN(m)))return new Date(NaN);if(!i.timezone){var g=new Date(u+m),Z=new Date(0);return Z.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),Z.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),Z}return f=G(i.timezone),isNaN(f)?new Date(NaN):new Date(u+m+f)}var P={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},J=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,R=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,y=/^([+-])(\d{2})(?::?(\d{2}))?$/;function w(r){var n,o={},t=r.split(P.dateTimeDelimiter);if(t.length>2)return o;if(/:/.test(t[0])?n=t[0]:(o.date=t[0],n=t[1],P.timeZoneDelimiter.test(o.date)&&(o.date=r.split(P.timeZoneDelimiter)[0],n=r.substr(o.date.length,r.length))),n){var i=P.timezone.exec(n);i?(o.time=n.replace(i[1],""),o.timezone=i[1]):o.time=n}return o}function F(r,o){var t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+o)+"})|(\\d{2}|[+-]\\d{"+(2+o)+"})$)"),n=r.match(t);if(!n)return{year:NaN,restDateString:""};var i=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:null===a?i:100*a,restDateString:r.slice((n[1]||n[2]).length)}}function Y(r,o){if(null===o)return new Date(NaN);var t=r.match(J);if(!t)return new Date(NaN);var n=!!t[4],i=T(t[1]),a=T(t[2])-1,c=T(t[3]),u=T(t[4]),m=T(t[5])-1;if(n)return function(r,o,t){return o>=1&&o<=53&&t>=0&&t<=6}(0,u,m)?function(r,o,t){var n=new Date(0);n.setUTCFullYear(r,0,4);var a=7*(o-1)+t+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+a),n}(o,u,m):new Date(NaN);var f=new Date(0);return function(r,o,t){return o>=0&&o<=11&&t>=1&&t<=(k[o]||(D(r)?29:28))}(o,a,c)&&function(r,o){return o>=1&&o<=(D(r)?366:365)}(o,i)?(f.setUTCFullYear(o,a,Math.max(i,c)),f):new Date(NaN)}function T(r){return r?parseInt(r):1}function z(r){var o=r.match(R);if(!o)return NaN;var t=N(o[1]),n=N(o[2]),i=N(o[3]);return function(r,o,t){return 24===r?0===o&&0===t:t>=0&&t<60&&o>=0&&o<60&&r>=0&&r<25}(t,n,i)?t*_+6e4*n+1e3*i:NaN}function N(r){return r&&parseFloat(r.replace(",","."))||0}function G(r){if("Z"===r)return 0;var o=r.match(y);if(!o)return 0;var t="+"===o[1]?-1:1,n=parseInt(o[2]),i=o[3]&&parseInt(o[3])||0;return function(r,o){return o>=0&&o<=59}(0,i)?t*(n*_+6e4*i):NaN}var k=[31,null,31,30,31,30,31,31,30,31,30,31];function D(r){return r%400==0||r%4==0&&r%100!=0}var e=l(3245),K=l(1856),V=l(9290),ee=l(5729),te=l(2677),re=l(6733),oe=l(1516),ne=l(1750);function ie(r,o){if(1&r&&(e.TgZ(0,"ion-select-option",23),e._uU(1),e.qZA()),2&r){const t=o.$implicit;e.s9C("value",t.key),e.xp6(1),e.Oqu(t.value)}}const E=function(){return{standalone:!0}};function ae(r,o){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"ion-col",24),e.TgZ(2,"ion-card",1),e.TgZ(3,"ion-card-content"),e.TgZ(4,"ion-label",25),e._uU(5),e.ALo(6,"translate"),e.ALo(7,"date"),e.ALo(8,"translate"),e.ALo(9,"translate"),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"ion-datetime",26),e.NdJ("ngModelChange",function(i){return e.CHM(t).$implicit.from=i}),e.ALo(12,"translate"),e.ALo(13,"translate"),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"br"),e._UZ(16,"br"),e.TgZ(17,"ion-label",25),e._uU(18),e.ALo(19,"translate"),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"ion-datetime",27),e.NdJ("ngModelChange",function(i){return e.CHM(t).$implicit.from=i}),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"ion-label",25),e._uU(26),e.ALo(27,"translate"),e.ALo(28,"date"),e.qZA(),e.TgZ(29,"ion-datetime",28),e.NdJ("ngModelChange",function(i){return e.CHM(t).$implicit.until=i}),e.ALo(30,"translate"),e.ALo(31,"translate"),e.ALo(32,"translate"),e.qZA(),e.qZA(),e.TgZ(33,"div",21),e.TgZ(34,"ion-button",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().deleteTimeframe(a)}),e._uU(35,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&r){const t=o.$implicit;e.xp6(5),e.AsE("",e.lcZ(6,21,"ACTIONS.EDIT_PROJECT.INPUT.on")," ",e.gM2(7,23,t.from,e.lcZ(8,28,"GENERAL.timeDisplayFormat"),e.lcZ(9,30,"GENERAL.timezone"),e.lcZ(10,32,"GENERAL.locale")),""),e.xp6(6),e.s9C("doneText",e.lcZ(13,36,"GENERAL.POPUPS.done")),e.s9C("cancelText",e.lcZ(14,38,"GENERAL.POPUPS.cancel")),e.Q6J("locale",e.lcZ(12,34,"GENERAL.locale"))("ngModel",t.from)("ngModelOptions",e.DdM(62,E)),e.xp6(7),e.AsE("",e.lcZ(19,40,"ACTIONS.EDIT_PROJECT.INPUT.from")," ",e.xi3(20,42,t.from,"hh:mm"),""),e.xp6(3),e.s9C("doneText",e.lcZ(23,47,"GENERAL.POPUPS.done")),e.s9C("cancelText",e.lcZ(24,49,"GENERAL.POPUPS.cancel")),e.Q6J("locale",e.lcZ(22,45,"GENERAL.locale"))("ngModel",t.from)("ngModelOptions",e.DdM(63,E)),e.xp6(5),e.AsE("",e.lcZ(27,51,"ACTIONS.EDIT_PROJECT.INPUT.until")," ",e.xi3(28,53,t.until,"hh:mm"),""),e.xp6(3),e.s9C("doneText",e.lcZ(31,58,"GENERAL.POPUPS.done")),e.s9C("cancelText",e.lcZ(32,60,"GENERAL.POPUPS.cancel")),e.Q6J("locale",e.lcZ(30,56,"GENERAL.locale"))("ngModel",t.until)("ngModelOptions",e.DdM(64,E))}}const se=[{path:"",component:(()=>{class r{constructor(t,n,i,a,c,u,m){this.projectService=t,this.timeframeService=n,this.formBuilder=i,this.router=a,this.errorService=c,this.translate=u,this.alertService=m,this.isProcessed=!1,this.timeframes=[],this.deleteTimeframes=[]}ngOnInit(){this.editProjectForm=this.formBuilder.group({topic:["",d.kI.required],title:["",d.kI.required],image:null,description:["",d.kI.required],cost:["",d.kI.required],min_grade:["",d.kI.required],max_grade:["",d.kI.required],min_participants:["",d.kI.required],max_participants:["",d.kI.required]})}ionViewWillEnter(){this.isProcessed=!1,this.getProject()}get errorControl(){return this.editProjectForm.controls}getProject(){this.projectService.getAssociatedProject().subscribe({error:t=>{this.errorService.errorOccurred.emit(t)},next:t=>{const n=t;for(const i of n.project.timeframes)i.from=x(S(i.from)),i.until=x(S(i.until));this.editProjectForm.patchValue(n.project),n.project.timeframes&&(this.timeframes=n.project.timeframes)}})}editProject(){!this.isProcessed&&this.editProjectForm.valid&&(this.isProcessed=!0,this.projectService.updateProject(this.editProjectForm.value).subscribe({error:t=>{if("The given data was invalid."==t.error.message)for(const n in t.error.errors){const i=[];for(const a in t.error.errors[n])i.push({[t.error.errors[n][a]]:!0});this.editProjectForm.controls[n].setErrors(i)}else this.errorService.errorOccurred.emit(t);this.isProcessed=!1},next:t=>{const n=t;this.alertService.alert("success",this.translate.instant("ACTIONS.EDIT_PROJECT.title"),n.message,"checkmark")},complete:()=>{this.editProjectForm.reset(),this.isProcessed=!1,this.router.navigate(["/manage-project"])}}),this.timeframes.forEach(t=>{t.id?this.timeframeService.updateTimeframe(t).subscribe({error:n=>{this.errorService.errorOccurred.emit(n)}}):this.timeframeService.createTimeframe(t).subscribe({error:n=>{this.errorService.errorOccurred.emit(n)}})}),this.deleteTimeframes.forEach(t=>{this.timeframeService.deleteTimeframe(t.id).subscribe({error:n=>{this.errorService.errorOccurred.emit(n)}})}))}addTimeframe(){this.timeframes.push({from:null,until:null})}deleteTimeframe(t){t.id?(this.deleteTimeframes.push(t),this.timeframes=this.timeframes.filter(n=>n.id!=t.id)):this.timeframes=this.timeframes.filter(n=>n!=t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(K.Y),e.Y36(V.h),e.Y36(d.qu),e.Y36(h.F0),e.Y36(ee.T),e.Y36(A.sK),e.Y36(te.c))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-project"]],decls:92,vars:60,consts:[[3,"title"],["color","light"],[1,"inside-card-grid"],[3,"formGroup","ngSubmit"],["formControlName","topic",3,"okText","cancelText"],[3,"value",4,"ngFor","ngForOf"],["formControlName","title","type","text",3,"placeholder"],[3,"errors"],["formControlName","description","type","text","rows","7",3,"placeholder"],["position","floating"],["formControlName","cost","type","text"],["lines","none","color","light"],[1,"addTimeframeCards"],[4,"ngFor","ngForOf"],["horizontal","center","vertical","center","slot","fixed"],["color","light",3,"click"],["name","add"],["formControlName","min_grade","type","text"],["formControlName","max_grade","type","text"],["formControlName","min_participants","type","number"],["formControlName","max_participants","type","number"],[1,"ion-padding"],["color","primary","expand","block","type","submit",1,"ion-no-margin",3,"disabled"],[3,"value"],["sizeXl","6","sizeLg","6","sizeMd","12","sizeSm","12","sizeXs","12"],[1,"ion-padding-start"],["presentation","date","color","primary",3,"locale","ngModel","ngModelOptions","doneText","cancelText","ngModelChange"],["presentation","time","color","primary",3,"locale","ngModel","ngModelOptions","doneText","cancelText","ngModelChange"],["color","primary","presentation","time",3,"locale","ngModel","ngModelOptions","doneText","cancelText","ngModelChange"],["color","danger","expand","block",1,"ion-no-margin",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content"),e._UZ(1,"app-toolbar"),e.TgZ(2,"ion-grid"),e.TgZ(3,"ion-row"),e.TgZ(4,"ion-col"),e._UZ(5,"app-card-title-bar",0),e.ALo(6,"translate"),e.TgZ(7,"ion-card",1),e.TgZ(8,"ion-card-content"),e.TgZ(9,"ion-grid",2),e.TgZ(10,"ion-row"),e.TgZ(11,"ion-col"),e.TgZ(12,"form",3),e.NdJ("ngSubmit",function(){return n.editProject()}),e.TgZ(13,"ion-item",1),e.TgZ(14,"ion-label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"ion-select",4),e.ALo(18,"translate"),e.ALo(19,"translate"),e.YNc(20,ie,2,2,"ion-select-option",5),e.ALo(21,"keyvalue"),e.ALo(22,"translate"),e.qZA(),e.qZA(),e.TgZ(23,"ion-item",1),e._UZ(24,"ion-input",6),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"app-form-error",7),e.TgZ(27,"ion-item",1),e._UZ(28,"ion-textarea",8),e.ALo(29,"translate"),e.qZA(),e._UZ(30,"app-form-error",7),e.TgZ(31,"ion-item",1),e.TgZ(32,"ion-label",9),e._uU(33),e.ALo(34,"translate"),e.qZA(),e._UZ(35,"ion-input",10),e.qZA(),e._UZ(36,"app-form-error",7),e.TgZ(37,"ion-list"),e.TgZ(38,"ion-item",11),e.TgZ(39,"ion-label"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.qZA(),e.TgZ(42,"div",12),e.TgZ(43,"ion-grid",2),e.TgZ(44,"ion-row"),e.YNc(45,ae,36,65,"ng-container",13),e.TgZ(46,"ion-col"),e.TgZ(47,"ion-card",1),e.TgZ(48,"div"),e.TgZ(49,"ion-fab",14),e.TgZ(50,"ion-fab-button",15),e.NdJ("click",function(){return n.addTimeframe()}),e._UZ(51,"ion-icon",16),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(52,"br"),e._UZ(53,"hr"),e.qZA(),e.TgZ(54,"ion-list"),e.TgZ(55,"ion-item",11),e.TgZ(56,"ion-label"),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.qZA(),e.TgZ(59,"ion-item",1),e.TgZ(60,"ion-label"),e._uU(61),e.ALo(62,"translate"),e.qZA(),e._UZ(63,"ion-input",17),e.qZA(),e._UZ(64,"app-form-error",7),e.TgZ(65,"ion-item",1),e.TgZ(66,"ion-label"),e._uU(67),e.ALo(68,"translate"),e.qZA(),e._UZ(69,"ion-input",18),e.qZA(),e._UZ(70,"app-form-error",7),e.qZA(),e.TgZ(71,"ion-list"),e.TgZ(72,"ion-item",11),e.TgZ(73,"ion-label"),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.qZA(),e.TgZ(76,"ion-item",1),e.TgZ(77,"ion-label"),e._uU(78),e.ALo(79,"translate"),e.qZA(),e._UZ(80,"ion-input",19),e.qZA(),e._UZ(81,"app-form-error",7),e.TgZ(82,"ion-item",1),e.TgZ(83,"ion-label"),e._uU(84),e.ALo(85,"translate"),e.qZA(),e._UZ(86,"ion-input",20),e.qZA(),e._UZ(87,"app-form-error",7),e.qZA(),e.TgZ(88,"div",21),e.TgZ(89,"ion-button",22),e._uU(90),e.ALo(91,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.s9C("title",e.lcZ(6,26,"ACTIONS.EDIT_PROJECT.title")),e.xp6(7),e.Q6J("formGroup",n.editProjectForm),e.xp6(3),e.Oqu(e.lcZ(16,28,"ACTIONS.EDIT_PROJECT.INPUT.topic")),e.xp6(2),e.s9C("okText",e.lcZ(18,30,"GENERAL.POPUPS.ok")),e.s9C("cancelText",e.lcZ(19,32,"GENERAL.POPUPS.cancel")),e.xp6(3),e.Q6J("ngForOf",e.lcZ(21,34,e.lcZ(22,36,"GENERAL.PROJECT_TOPICS"))),e.xp6(4),e.s9C("placeholder",e.lcZ(25,38,"ACTIONS.EDIT_PROJECT.INPUT.title")),e.xp6(2),e.Q6J("errors",n.errorControl.title.errors),e.xp6(2),e.s9C("placeholder",e.lcZ(29,40,"ACTIONS.EDIT_PROJECT.INPUT.description")),e.xp6(2),e.Q6J("errors",n.errorControl.description.errors),e.xp6(3),e.Oqu(e.lcZ(34,42,"ACTIONS.EDIT_PROJECT.INPUT.cost")),e.xp6(3),e.Q6J("errors",n.errorControl.cost.errors),e.xp6(4),e.Oqu(e.lcZ(41,44,"ACTIONS.EDIT_PROJECT.INPUT.timeframe")),e.xp6(5),e.Q6J("ngForOf",n.timeframes),e.xp6(12),e.Oqu(e.lcZ(58,46,"ACTIONS.EDIT_PROJECT.INPUT.grade")),e.xp6(4),e.Oqu(e.lcZ(62,48,"ACTIONS.EDIT_PROJECT.INPUT.from")),e.xp6(3),e.Q6J("errors",n.errorControl.min_grade.errors),e.xp6(3),e.Oqu(e.lcZ(68,50,"ACTIONS.EDIT_PROJECT.INPUT.until")),e.xp6(3),e.Q6J("errors",n.errorControl.max_grade.errors),e.xp6(4),e.Oqu(e.lcZ(75,52,"ACTIONS.EDIT_PROJECT.INPUT.capacity")),e.xp6(4),e.Oqu(e.lcZ(79,54,"ACTIONS.EDIT_PROJECT.INPUT.from")),e.xp6(3),e.Q6J("errors",n.errorControl.min_participants.errors),e.xp6(3),e.Oqu(e.lcZ(85,56,"ACTIONS.EDIT_PROJECT.INPUT.until")),e.xp6(3),e.Q6J("errors",n.errorControl.max_participants.errors),e.xp6(2),e.Q6J("disabled",n.editProjectForm.invalid),e.xp6(1),e.Oqu(e.lcZ(91,58,"ACTIONS.EDIT_PROJECT.INPUT.submitButton")))},directives:[s.W2,re.n,s.jY,s.Nd,s.wI,oe.$,s.PM,s.FN,d._Y,d.JL,d.sg,s.Ie,s.Q$,s.t9,s.QI,d.JJ,d.u,v.sg,s.pK,s.j9,ne.A,s.g2,s.q_,s.IJ,s.W4,s.gu,s.as,s.YG,s.n0,s.x4,d.On],pipes:[A.X$,v.Nd,v.uU],styles:[".addTimeframeCards[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{height:100%;min-height:100px}hr[_ngcontent-%COMP%]{background-color:#dedede}"]}),r})()}];let le=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[h.Bz.forChild(se)],h.Bz]}),r})();var ce=l(6453),de=l(6060);let me=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[v.ez,d.u5,s.Pc,le,ce.K,d.UX,A.aw.forChild({loader:{provide:A.Zw,useFactory:de.p,deps:[j.eN]}})]]}),r})()}}]);